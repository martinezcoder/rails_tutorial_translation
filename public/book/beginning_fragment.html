
<h1 class="title">Tutoriel Ruby on Rails </h1>


<h1 class="subtitle">  Apprendre Rails par l'exemple</h1>


<h2 class="author">Michael Hartl</h2>



<h1 class="contents">Contenu</h1>


<div id="table_of_contents"><ol>
<li class="chapter"><a href="beginning#top"><span class="number">Chapitre 1</span> De zéro au déploiement</a></li>
<li><ol>
<li class="section"><a href="beginning#sec:introduction"><span class="number">1.1</span> Introduction</a></li>
<li><ol>
<li class="subsection"><a href="beginning#sec:comments_for_various_readers"><span class="number">1.1.1</span> Commentaires pour les lecteurs différents</a></li>
<li class="subsection"><a href="beginning#sec:1.1.2"><span class="number">1.1.2</span> &ldquo;Dimensionner&rdquo; Rails</a></li>
<li class="subsection"><a href="beginning#sec:conventions"><span class="number">1.1.3</span> Conventions utilisées dans ce livre</a></li></ol></li>
<li class="section"><a href="beginning#sec:up_and_running"><span class="number">1.2</span> Debout et au boulot</a></li>
<li><ol>
<li class="subsection"><a href="beginning#sec:development_tools"><span class="number">1.2.1</span> Environnements de développement</a></li>
<li><ol>
<li class="subsubsection"><a href="beginning#sec:1.2.1.1">IDEs</a></li>
<li class="subsubsection"><a href="beginning#sec:1.2.1.2">Éditeurs de texte et lignes de commande</a></li>
<li class="subsubsection"><a href="beginning#sec:1.2.1.3">Navigateurs</a></li>
<li class="subsubsection"><a href="beginning#sec:1.2.1.4">Note à propos des outils</a></li></ol></li>
<li class="subsection"><a href="beginning#sec:rubygems"><span class="number">1.2.2</span> Ruby, RubyGems, Rails, et Git</a></li>
<li><ol>
<li class="subsubsection"><a href="beginning#sec:rails_installer_windows">Installation de Rails (Windows)</a></li>
<li class="subsubsection"><a href="beginning#sec:install_git">Installer Git</a></li>
<li class="subsubsection"><a href="beginning#sec:install_ruby">Installer Ruby</a></li>
<li class="subsubsection"><a href="beginning#sec:install_rubygems">Installer RubyGems</a></li>
<li class="subsubsection"><a href="beginning#sec:install_rails">Installer Rails</a></li></ol></li>
<li class="subsection"><a href="beginning#sec:the_first_application"><span class="number">1.2.3</span> La première application</a></li>
<li class="subsection"><a href="beginning#sec:bundler"><span class="number">1.2.4</span> Bundler</a></li>
<li class="subsection"><a href="beginning#sec:rails_server"><span class="number">1.2.5</span> <code>Le serveur rails (rails server)</code></a></li>
<li class="subsection"><a href="beginning#sec:mvc"><span class="number">1.2.6</span> Modèles-Vue-Contrôleur (MVC)</a></li></ol></li>
<li class="section"><a href="beginning#sec:version_control"><span class="number">1.3</span> Contrôle de versions avec Git</a></li>
<li><ol>
<li class="subsection"><a href="beginning#sec:git_setup"><span class="number">1.3.1</span> Installation et réglages</a></li>
<li><ol>
<li class="subsubsection"><a href="beginning#sec:1.3.1.1">Initialisation des réglages système</a></li>
<li class="subsubsection"><a href="beginning#sec:1.3.1.2">Initialisation des réglages du dépôt (repository)</a></li></ol></li>
<li class="subsection"><a href="beginning#sec:adding_and_committing"><span class="number">1.3.2</span> Ajout et mandat de dépôt</a></li>
<li class="subsection"><a href="beginning#sec:1.3.3"><span class="number">1.3.3</span> Qu'est-ce que Git peut faire de bien pour vous&nbsp;?</a></li>
<li class="subsection"><a href="beginning#sec:github"><span class="number">1.3.4</span> GitHub</a></li>
<li class="subsection"><a href="beginning#sec:git_commands"><span class="number">1.3.5</span> Branch, edit, commit, merge</a></li>
<li><ol>
<li class="subsubsection"><a href="beginning#sec:git_branch">Branch</a></li>
<li class="subsubsection"><a href="beginning#sec:git_edit">Edit</a></li>
<li class="subsubsection"><a href="beginning#sec:git_commit">Commit</a></li>
<li class="subsubsection"><a href="beginning#sec:git_merge">Merge</a></li>
<li class="subsubsection"><a href="beginning#sec:git_push">Push</a></li></ol></li></ol></li>
<li class="section"><a href="beginning#sec:deploying"><span class="number">1.4</span> Déploiement</a></li>
<li><ol>
<li class="subsection"><a href="beginning#sec:1.4.1"><span class="number">1.4.1</span> Réglages Heroku</a></li>
<li class="subsection"><a href="beginning#sec:heroku_step_one"><span class="number">1.4.2</span> Déploiement Heroku, première étape</a></li>
<li class="subsection"><a href="beginning#sec:1.4.3"><span class="number">1.4.3</span> Déploiement Heroku, seconde étape</a></li>
<li class="subsection"><a href="beginning#sec:heroku_commands"><span class="number">1.4.4</span> Commandes Heroku</a></li></ol></li>
<li class="section"><a href="beginning#sec:beginning_conclusion"><span class="number">1.5</span> Conclusion</a></li></ol></li>
<li class="chapter"><a href="a-demo-app#top"><span class="number">Chapitre 2</span> Une application démo</a></li>
<li><ol>
<li class="section"><a href="a-demo-app#sec:planning_the_application"><span class="number">2.1</span> Planifier l'application</a></li>
<li><ol>
<li class="subsection"><a href="a-demo-app#sec:modeling_users"><span class="number">2.1.1</span> Modéliser les utilisateurs</a></li>
<li class="subsection"><a href="a-demo-app#sec:modeling_microposts"><span class="number">2.1.2</span> Modéliser les micro-messages</a></li></ol></li>
<li class="section"><a href="a-demo-app#sec:demo_users_resource"><span class="number">2.2</span> La ressource Utilisateurs (Users)</a></li>
<li><ol>
<li class="subsection"><a href="a-demo-app#sec:a_user_tour"><span class="number">2.2.1</span> Un tour de l'utilisateur</a></li>
<li class="subsection"><a href="a-demo-app#sec:mvc_in_action"><span class="number">2.2.2</span> MVC en action</a></li>
<li class="subsection"><a href="a-demo-app#sec:weaknesses_of_this_users_resource"><span class="number">2.2.3</span> Faiblesses de la ressource Utilisateurs (Users)</a></li></ol></li>
<li class="section"><a href="a-demo-app#sec:microposts_resource"><span class="number">2.3</span> La ressource Micro-messages (Microposts)</a></li>
<li><ol>
<li class="subsection"><a href="a-demo-app#sec:a_micropost_microtour"><span class="number">2.3.1</span> Un petit tour du micro-message</a></li>
<li class="subsection"><a href="a-demo-app#sec:putting_the_micro_in_microposts"><span class="number">2.3.2</span> Appliquer le <em>micro</em> aux micro-messages</a></li>
<li class="subsection"><a href="a-demo-app#sec:demo_user_has_many_microposts"><span class="number">2.3.3</span> Un utilisateur <code>has_many</code> micro-messages</a></li>
<li class="subsection"><a href="a-demo-app#sec:inheritance_hierarchies"><span class="number">2.3.4</span> Hiérarchie des héritages</a></li>
<li class="subsection"><a href="a-demo-app#sec:deploying_the_demo_app"><span class="number">2.3.5</span> Déployer l'application Démo</a></li></ol></li>
<li class="section"><a href="a-demo-app#sec:2.4"><span class="number">2.4</span> Conclusion</a></li></ol></li>
<li class="chapter"><a href="static-pages#top"><span class="number">Chapitre 3</span> Pages statiques courantes</a></li>
<li><ol>
<li class="section"><a href="static-pages#sec:static_pages"><span class="number">3.1</span> Pages statiques</a></li>
<li><ol>
<li class="subsection"><a href="static-pages#sec:truly_static_pages"><span class="number">3.1.1</span> Pages HTML statiques</a></li>
<li class="subsection"><a href="static-pages#sec:static_pages_with_rails"><span class="number">3.1.2</span> Les pages statiques avec Rails</a></li></ol></li>
<li class="section"><a href="static-pages#sec:first_tests"><span class="number">3.2</span> Premiers tests</a></li>
<li><ol>
<li class="subsection"><a href="static-pages#sec:testing_tools"><span class="number">3.2.1</span> Outils de test</a></li>
<li><ol>
<li class="subsubsection"><a href="static-pages#sec:autotest">Auto-test</a></li></ol></li>
<li class="subsection"><a href="static-pages#sec:TDD"><span class="number">3.2.2</span> TDD : Rouge, Vert, Refactor</a></li>
<li><ol>
<li class="subsubsection"><a href="static-pages#sec:spork">Spork</a></li>
<li class="subsubsection"><a href="static-pages#sec:red">Rouge</a></li>
<li class="subsubsection"><a href="static-pages#sec:green">Vert</a></li>
<li class="subsubsection"><a href="static-pages#sec:refactor">Refactor</a></li></ol></li></ol></li>
<li class="section"><a href="static-pages#sec:slightly_dynamic_pages"><span class="number">3.3</span> Pages (un peu) dynamiques</a></li>
<li><ol>
<li class="subsection"><a href="static-pages#sec:testing_a_title_change"><span class="number">3.3.1</span> Test d'un changement de titre</a></li>
<li class="subsection"><a href="static-pages#sec:passing_title_tests"><span class="number">3.3.2</span> Réussir les tests de titre</a></li>
<li class="subsection"><a href="static-pages#sec:instance_variables_embedded_ruby"><span class="number">3.3.3</span> Variables d'instance et Ruby embarqué</a></li>
<li class="subsection"><a href="static-pages#sec:layouts"><span class="number">3.3.4</span> Supprimer les répétitions avec les <em>layouts</em></a></li></ol></li>
<li class="section"><a href="static-pages#sec:static_pages_conclusion"><span class="number">3.4</span> Conclusion</a></li>
<li class="section"><a href="static-pages#sec:static_pages_Exercices"><span class="number">3.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="rails-flavored-ruby#top"><span class="number">Chapitre 4</span> Rails au goût Ruby</a></li>
<li><ol>
<li class="section"><a href="rails-flavored-ruby#sec:motivation"><span class="number">4.1</span> Motivation</a></li>
<li><ol>
<li class="subsection"><a href="rails-flavored-ruby#sec:title_helper"><span class="number">4.1.1</span> Un <em>helper</em> pour le titre</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:cascading_style_sheets"><span class="number">4.1.2</span> Feuilles de styles (CSS — Cascading Style Sheets)</a></li></ol></li>
<li class="section"><a href="rails-flavored-ruby#sec:strings_and_methods"><span class="number">4.2</span> Chaines de caractères et méthodes</a></li>
<li><ol>
<li class="subsection"><a href="rails-flavored-ruby#sec:comments"><span class="number">4.2.1</span> Commentaires</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:strings"><span class="number">4.2.2</span> Chaines de caractères</a></li>
<li><ol>
<li class="subsubsection"><a href="rails-flavored-ruby#sec:printing">Impression</a></li>
<li class="subsubsection"><a href="rails-flavored-ruby#sec:single_quoted_strings">Chaines de caractères «&nbsp;apostrophées&nbsp;»</a></li></ol></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:objects_and_message_passing"><span class="number">4.2.3</span> Objets et passage de message</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:method_definitions"><span class="number">4.2.4</span> Définition de méthode</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:back_to_the_title_helper"><span class="number">4.2.5</span> Retour à l'« helper » de titre</a></li></ol></li>
<li class="section"><a href="rails-flavored-ruby#sec:other_data_structures"><span class="number">4.3</span> Autres structures de données</a></li>
<li><ol>
<li class="subsection"><a href="rails-flavored-ruby#sec:arrays_and_ranges"><span class="number">4.3.1</span> Tableaux et rangs</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:blocks"><span class="number">4.3.2</span> Blocs</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:hashes_and_symbols"><span class="number">4.3.3</span> Tables de hachage et symboles</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:css_revisited"><span class="number">4.3.4</span> CSS revisitées</a></li></ol></li>
<li class="section"><a href="rails-flavored-ruby#sec:ruby_classes"><span class="number">4.4</span> Classes Ruby</a></li>
<li><ol>
<li class="subsection"><a href="rails-flavored-ruby#sec:constructors"><span class="number">4.4.1</span> Constructeurs</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:a_class_of_our_own"><span class="number">4.4.2</span> Héritages de classes</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:modifying_built_in_classes"><span class="number">4.4.3</span> Modifier les classes d'origine</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:a_controller_class"><span class="number">4.4.4</span> Classe de contrôleur</a></li>
<li class="subsection"><a href="rails-flavored-ruby#sec:a_user_class"><span class="number">4.4.5</span> La classe utilisateur</a></li></ol></li>
<li class="section"><a href="rails-flavored-ruby#sec:Exercices"><span class="number">4.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="filling-in-the-layout#top"><span class="number">Chapitre 5</span> Poursuivre la mise en page</a></li>
<li><ol>
<li class="section"><a href="filling-in-the-layout#sec:structure"><span class="number">5.1</span> Ajout de structure</a></li>
<li><ol>
<li class="subsection"><a href="filling-in-the-layout#sec:adding_to_the_layout"><span class="number">5.1.1</span> Navigation du site</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:custom_css"><span class="number">5.1.2</span> Personnalisation CSS</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:partials"><span class="number">5.1.3</span> Partiels</a></li></ol></li>
<li class="section"><a href="filling-in-the-layout#sec:layout_links"><span class="number">5.2</span> Liens pour la mise en page</a></li>
<li><ol>
<li class="subsection"><a href="filling-in-the-layout#sec:integration_tests"><span class="number">5.2.1</span> Test d'intégration</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:rails_routes"><span class="number">5.2.2</span> Routes Rails</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:named_routes"><span class="number">5.2.3</span> Nommer les routes</a></li></ol></li>
<li class="section"><a href="filling-in-the-layout#sec:user_signup"><span class="number">5.3</span> Inscription de l'utilisateur : une première étape</a></li>
<li><ol>
<li class="subsection"><a href="filling-in-the-layout#sec:users_controller"><span class="number">5.3.1</span> Contrôleur Utilisateur</a></li>
<li class="subsection"><a href="filling-in-the-layout#sec:signup_url"><span class="number">5.3.2</span> URL d'inscription</a></li></ol></li>
<li class="section"><a href="filling-in-the-layout#sec:layout_conclusion"><span class="number">5.4</span> Conclusion</a></li>
<li class="section"><a href="filling-in-the-layout#sec:layout_Exercices"><span class="number">5.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="modeling-and-viewing-users-one#top"><span class="number">Chapitre 6</span> Modéliser et afficher les utilisateurs, partie I</a></li>
<li><ol>
<li class="section"><a href="modeling-and-viewing-users-one#sec:user_model"><span class="number">6.1</span> Modèle utilisateur</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:database_migrations"><span class="number">6.1.1</span> Migrations de la base de données</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:the_model_file"><span class="number">6.1.2</span> Le fichier modèle</a></li>
<li><ol>
<li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:model_annotation">Annotation des modèles</a></li>
<li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:accessible_attributes">Attributs accessibles</a></li></ol></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:creating_user_objects"><span class="number">6.1.3</span> Créer des objets Utilisateur</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:finding_user_objects"><span class="number">6.1.4</span> Recherche dans les objets Utilisateurs</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:updating_user_objects"><span class="number">6.1.5</span> Actualisation des objets Utilisateurs</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-one#sec:user_validations"><span class="number">6.2</span> Validations utilisateur</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:presence_validation"><span class="number">6.2.1</span> Valider l'existence</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:length_validation"><span class="number">6.2.2</span> Valider la longueur</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:format_validation"><span class="number">6.2.3</span> Valider le format</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:uniqueness_validation"><span class="number">6.2.4</span> Valider l'unicité</a></li>
<li><ol>
<li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:the_caveat">L'avertissement d'unicité</a></li></ol></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-one#sec:viewing_users"><span class="number">6.3</span> Afficher les utilisateurs</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:rails_environments"><span class="number">6.3.1</span> Débuggage et environnements Rails</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:users_show"><span class="number">6.3.2</span> Modèle, Vue et Contrôleur Utilisateur</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-one#sec:a_users_resource"><span class="number">6.3.3</span> Ressource Utilisateurs</a></li>
<li><ol>
<li class="subsubsection"><a href="modeling-and-viewing-users-one#sec:params_in_debug">Paramètres pour le déboggage</a></li></ol></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-one#sec:6.4"><span class="number">6.4</span> Conclusion</a></li>
<li class="section"><a href="modeling-and-viewing-users-one#sec:6.5"><span class="number">6.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="modeling-and-viewing-users-two#top"><span class="number">Chapitre 7</span> Modéliser et afficher les utilisateurs, partie II</a></li>
<li><ol>
<li class="section"><a href="modeling-and-viewing-users-two#sec:insecure_passwords"><span class="number">7.1</span> Mots de passe non sécurisés</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_validations"><span class="number">7.1.1</span> Valider le mot de passe</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:password_migration"><span class="number">7.1.2</span> Migrer un mot de passe</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_active_record_callback"><span class="number">7.1.3</span> <em>Fonction de rappel</em> dans l'Active Record</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-two#sec:secure_passwords"><span class="number">7.2</span> Sécuriser les mots de passe</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_secure_password_test"><span class="number">7.2.1</span> Test de mot de passe sécurisé</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:secure_password_theory"><span class="number">7.2.2</span> Un peu de théorie sur la sécurisation des mots de passe</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:implementing_has_password"><span class="number">7.2.3</span> Implémenter la méthode <code>has_password?</code></a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:an_authenticate_method"><span class="number">7.2.4</span> Méthode d'authentification</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-two#sec:better_user_views"><span class="number">7.3</span> Meilleures vues d'utilisateurs</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:tests_with_factories"><span class="number">7.3.1</span> Tester la page de l'utilisateur (avec <em>factories</em>)</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_name_and_a_gravatar"><span class="number">7.3.2</span> Un nom et un Gravatar</a></li>
<li><ol>
<li class="subsubsection"><a href="modeling-and-viewing-users-two#sec:a_gravatar_helper">Un « helper » de Gravatar</a></li></ol></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:a_user_sidebar"><span class="number">7.3.3</span> Une barre utilisateur latérale</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-two#sec:7.4"><span class="number">7.4</span> Conclusion</a></li>
<li><ol>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:7.4.1"><span class="number">7.4.1</span> Dépôt Git</a></li>
<li class="subsection"><a href="modeling-and-viewing-users-two#sec:heroku_deploy"><span class="number">7.4.2</span> Déploiement Heroku</a></li></ol></li>
<li class="section"><a href="modeling-and-viewing-users-two#sec:more_modeling_users_Exercices"><span class="number">7.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="sign-up#top"><span class="number">Chapitre 8</span> Inscription</a></li>
<li><ol>
<li class="section"><a href="sign-up#sec:signup_form"><span class="number">8.1</span> Formulaire d'inscription</a></li>
<li><ol>
<li class="subsection"><a href="sign-up#sec:using_form_for"><span class="number">8.1.1</span> Utiliser  <code>form_for</code></a></li>
<li class="subsection"><a href="sign-up#sec:the_form_html"><span class="number">8.1.2</span> Le formulaire HTML</a></li></ol></li>
<li class="section"><a href="sign-up#sec:signup_failure"><span class="number">8.2</span> Échec de l'inscription</a></li>
<li><ol>
<li class="subsection"><a href="sign-up#sec:testing_failure"><span class="number">8.2.1</span> Test de l'échec</a></li>
<li class="subsection"><a href="sign-up#sec:a_working_form"><span class="number">8.2.2</span> Un formulaire fonctionnel</a></li>
<li class="subsection"><a href="sign-up#sec:signup_error_messages"><span class="number">8.2.3</span> Inscription&nbsp;: messages d'erreur</a></li>
<li class="subsection"><a href="sign-up#sec:filtering_parameter_logging"><span class="number">8.2.4</span> Filtrer les paramètres d'identification</a></li></ol></li>
<li class="section"><a href="sign-up#sec:signup_success"><span class="number">8.3</span> Succès de l'inscription</a></li>
<li><ol>
<li class="subsection"><a href="sign-up#sec:testing_success"><span class="number">8.3.1</span> Tester le succès de l'inscription</a></li>
<li class="subsection"><a href="sign-up#sec:the_finished_signup_form"><span class="number">8.3.2</span> Le formulaire d'inscription finalisé</a></li>
<li class="subsection"><a href="sign-up#sec:the_flash"><span class="number">8.3.3</span> Le message «&nbsp;flash&nbsp;»</a</a></li>
<li class="subsection"><a href="sign-up#sec:the_first_signup"><span class="number">8.3.4</span> La première inscription</a></li></ol></li>
<li class="section"><a href="sign-up#sec:rspec_integration_tests"><span class="number">8.4</span> Test d'intégration RSpec</a></li>
<li><ol>
<li class="subsection"><a href="sign-up#sec:integration_tests_with_style"><span class="number">8.4.1</span> Tests d'intégration avec les styles</a></li>
<li class="subsection"><a href="sign-up#sec:failed_signup"><span class="number">8.4.2</span> Un échec d'inscription ne devrait pas créer un nouvel utilisateur</a></li>
<li class="subsection"><a href="sign-up#sec:successful_signup"><span class="number">8.4.3</span> Le succès d'une inscription devrait créer un nouvel utilisateur</a></li></ol></li>
<li class="section"><a href="sign-up#sec:8.5"><span class="number">8.5</span> Conclusion</a></li>
<li class="section"><a href="sign-up#sec:signup_Exercices"><span class="number">8.6</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="sign-in-sign-out#top"><span class="number">Chapitre 9</span> Connexion, déconnexion</a></li>
<li><ol>
<li class="section"><a href="sign-in-sign-out#sec:sessions"><span class="number">9.1</span> Les sessions</a></li>
<li><ol>
<li class="subsection"><a href="sign-in-sign-out#sec:sessions_controller"><span class="number">9.1.1</span> Le contrôleur de session</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:signin_form"><span class="number">9.1.2</span> Formulaire d'identification</a></li></ol></li>
<li class="section"><a href="sign-in-sign-out#sec:signin_failure"><span class="number">9.2</span> Échec de l'identification</a></li>
<li><ol>
<li class="subsection"><a href="sign-in-sign-out#sec:reviewing_form_submission"><span class="number">9.2.1</span> Examen de la soumission du formulaire</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:failed_signin"><span class="number">9.2.2</span> Échec de l'identification (test et code)</a></li></ol></li>
<li class="section"><a href="sign-in-sign-out#sec:signin_success"><span class="number">9.3</span> Succès de l'identification</a></li>
<li><ol>
<li class="subsection"><a href="sign-in-sign-out#sec:the_completed_create_action"><span class="number">9.3.1</span> L'action <code>create</code> finalisée</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:remember_me"><span class="number">9.3.2</span> Se souvenir de moi</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:current_user"><span class="number">9.3.3</span> Utilisateur courant</a></li></ol></li>
<li class="section"><a href="sign-in-sign-out#sec:signing_out"><span class="number">9.4</span> Déconnexion</a></li>
<li><ol>
<li class="subsection"><a href="sign-in-sign-out#sec:destroying_sessions"><span class="number">9.4.1</span> Détruire la session</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:signin_upon_signup"><span class="number">9.4.2</span> Connexion à l'inscription</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:changing_the_layout_links"><span class="number">9.4.3</span> Changement des liens de la mise en page</a></li>
<li class="subsection"><a href="sign-in-sign-out#sec:signin_out_integration_tests"><span class="number">9.4.4</span> Test d'intégration de l'identification/déconnexion</a></li></ol></li>
<li class="section"><a href="sign-in-sign-out#sec:9.5"><span class="number">9.5</span> Conclusion</a></li>
<li class="section"><a href="sign-in-sign-out#sec:sign_in_out_Exercices"><span class="number">9.6</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="updating-showing-and-deleting-users#top"><span class="number">Chapitre 10</span> Actualiser, afficher et supprimer des utilisateurs</a></li>
<li><ol>
<li class="section"><a href="updating-showing-and-deleting-users#sec:updating_users"><span class="number">10.1</span> Actualiser l'utilisateur</a></li>
<li><ol>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:edit_form"><span class="number">10.1.1</span> Formulaire de modification</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:enabling_edits"><span class="number">10.1.2</span> Permettre les modifications</a></li></ol></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:protecting_pages"><span class="number">10.2</span> Protéger les pages</a></li>
<li><ol>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_signed_in_users"><span class="number">10.2.1</span> Utilisateurs identifiés requis</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:requiring_the_right_user"><span class="number">10.2.2</span> Nécessité du bon utilisateur</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:friendly_forwarding"><span class="number">10.2.3</span> Redirection conviviale</a></li></ol></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:showing_users"><span class="number">10.3</span> Afficher les utilisateurs</a></li>
<li><ol>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:user_index"><span class="number">10.3.1</span> Liste des utilisateurs</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:sample_users"><span class="number">10.3.2</span> Exemples d'utilisateurs</a></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:pagination"><span class="number">10.3.3</span> Pagination</a></li>
<li><ol>
<li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:testing_pagination">Test de la pagination</a></li></ol></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:partial_refactoring"><span class="number">10.3.4</span> Restructuration des partiels</a></li></ol></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:destroying_users"><span class="number">10.4</span> Supprimer des utilisateurs</a></li>
<li><ol>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:administrative_users"><span class="number">10.4.1</span> Utilisateurs administrateurs</a></li>
<li><ol>
<li class="subsubsection"><a href="updating-showing-and-deleting-users#sec:revisiting_attr_accessible">Révision de <code>attr_accessible</code></a></li></ol></li>
<li class="subsection"><a href="updating-showing-and-deleting-users#sec:the_destroy_action"><span class="number">10.4.2</span> L'action <code>destroy</code> («&nbsp;supprimer&nbsp;»)</a></li></ol></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:10.5"><span class="number">10.5</span> Conclusion</a></li>
<li class="section"><a href="updating-showing-and-deleting-users#sec:updating_deleting_Exercices"><span class="number">10.6</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="user-microposts#top"><span class="number">Chapitre 11</span> Micro-messages d'utilisateurs</a></li>
<li><ol>
<li class="section"><a href="user-microposts#sec:a_micropost_model"><span class="number">11.1</span> Le modèle Micropost («&nbsp;Micro-message&nbsp;»)</a></li>
<li><ol>
<li class="subsection"><a href="user-microposts#sec:the_basic_model"><span class="number">11.1.1</span> Le modèle initial</a></li>
<li><ol>
<li class="subsubsection"><a href="user-microposts#sec:accessible_attribute">Attributs accessibles</a></li></ol></li>
<li class="subsection"><a href="user-microposts#sec:user_micropost_associations"><span class="number">11.1.2</span> Associations Utilisateur/micro-messages</a></li>
<li class="subsection"><a href="user-microposts#sec:ordering_and_dependency"><span class="number">11.1.3</span> Affinements du micro-message</a></li>
<li><ol>
<li class="subsubsection"><a href="user-microposts#sec:default_scope">Portée par défaut</a></li>
<li class="subsubsection"><a href="user-microposts#sec:dependent_destroy">Dépendances de la suppression</a></li></ol></li>
<li class="subsection"><a href="user-microposts#sec:micropost_validations"><span class="number">11.1.4</span> Validations du micro-message</a></li></ol></li>
<li class="section"><a href="user-microposts#sec:showing_microposts"><span class="number">11.2</span> Afficher les micro-messages</a></li>
<li><ol>
<li class="subsection"><a href="user-microposts#sec:augmenting_the_user_show_page"><span class="number">11.2.1</span> Etoffement de la page de l'utilisateur</a></li>
<li class="subsection"><a href="user-microposts#sec:sample_microposts"><span class="number">11.2.2</span> Exemples de micro-messages</a></li></ol></li>
<li class="section"><a href="user-microposts#sec:manipulating_microposts"><span class="number">11.3</span> Manipuler les micro-messages</a></li>
<li><ol>
<li class="subsection"><a href="user-microposts#sec:access_control"><span class="number">11.3.1</span> Contrôle de l'accès</a></li>
<li class="subsection"><a href="user-microposts#sec:creating_microposts"><span class="number">11.3.2</span> Créer des micro-messages</a></li>
<li class="subsection"><a href="user-microposts#sec:a_proto_feed"><span class="number">11.3.3</span> Une proto-alimentation</a></li>
<li class="subsection"><a href="user-microposts#sec:destroying_microposts"><span class="number">11.3.4</span> Supprimer des micro-messages</a></li>
<li class="subsection"><a href="user-microposts#sec:testing_the_new_home_page"><span class="number">11.3.5</span> Test de la nouvelle page d'accueil</a></li></ol></li>
<li class="section"><a href="user-microposts#sec:11.4"><span class="number">11.4</span> Conclusion</a></li>
<li class="section"><a href="user-microposts#sec:micropost_Exercices"><span class="number">11.5</span> Exercices</a></li></ol></li>
<li class="chapter"><a href="following-users#top"><span class="number">Chapitre 12</span> Suivi des utilisateurs</a></li>
<li><ol>
<li class="section"><a href="following-users#sec:the_relationship_model"><span class="number">12.1</span> Le modèle Relation (Relationship model)</a></li>
<li><ol>
<li class="subsection"><a href="following-users#sec:a_problem_with_the_data_model"><span class="number">12.1.1</span> Un problème du modèle de données (et sa solution)</a></li>
<li class="subsection"><a href="following-users#sec:relationship_user_associations"><span class="number">12.1.2</span> Associations Utilisateur/Relations</a></li>
<li class="subsection"><a href="following-users#sec:relationship_validations"><span class="number">12.1.3</span> Validations</a></li>
<li class="subsection"><a href="following-users#sec:following"><span class="number">12.1.4</span> Auteurs suivis</a></li>
<li class="subsection"><a href="following-users#sec:followers"><span class="number">12.1.5</span> Les Lecteurs</a></li></ol></li>
<li class="section"><a href="following-users#sec:a_web_interface_for_following_and_followers"><span class="number">12.2</span> Une interface web pour les auteurs et les lecteurs</a></li>
<li><ol>
<li class="subsection"><a href="following-users#sec:sample_following_data"><span class="number">12.2.1</span> Exemple de donnée de suivi</a></li>
<li class="subsection"><a href="following-users#sec:stats_and_a_follow_form"><span class="number">12.2.2</span> Statistiques et formulaire de suivi</a></li>
<li class="subsection"><a href="following-users#sec:following_and_followers_pages"><span class="number">12.2.3</span> Pages d'auteurs suivis et de lecteurs</a></li>
<li class="subsection"><a href="following-users#sec:a_working_follow_button_the_standard_way"><span class="number">12.2.4</span> Un bouton de suivi standard</a></li>
<li class="subsection"><a href="following-users#sec:a_working_follow_button_with_ajax"><span class="number">12.2.5</span> Un bouton fonctionnant avec Ajax</a></li></ol></li>
<li class="section"><a href="following-users#sec:the_status_feed"><span class="number">12.3</span> L'état de l'alimentation</a></li>
<li><ol>
<li class="subsection"><a href="following-users#sec:motivation_and_strategy"><span class="number">12.3.1</span> Motivation et stratégie</a></li>
<li class="subsection"><a href="following-users#sec:a_first_feed_implementation"><span class="number">12.3.2</span> Une première implémentation de peuplement</a></li>
<li class="subsection"><a href="following-users#sec:scopes_subselects_and_a_lambda"><span class="number">12.3.3</span> Champs d'application, sous-sélections et lambda</a></li>
<li class="subsection"><a href="following-users#sec:the_new_status_feed"><span class="number">12.3.4</span> Nouvel état de l'alimentation</a></li></ol></li>
<li class="section"><a href="following-users#sec:following_conclusion"><span class="number">12.4</span> Conclusion</a></li>
<li><ol>
<li class="subsection"><a href="following-users#sec:extensions_to_the_sample_application"><span class="number">12.4.1</span> Extensions de l'application exemple</a></li>
<li><ol>
<li class="subsubsection"><a href="following-users#sec:replies">Réponses</a></li>
<li class="subsubsection"><a href="following-users#sec:messaging">Notification</a></li>
<li class="subsubsection"><a href="following-users#sec:follower_notifications">Notifications aux lecteurs</a></li>
<li class="subsubsection"><a href="following-users#sec:password_reminders">Rappel du mot de passe</a></li>
<li class="subsubsection"><a href="following-users#sec:signup_confirmation">Confirmation d'inscription</a></li>
<li class="subsubsection"><a href="following-users#sec:rss_feed">Alimentation RSS</a></li>
<li class="subsubsection"><a href="following-users#sec:rest_api">REST API</a></li>
<li class="subsubsection"><a href="following-users#sec:search">Recherche</a></li></ol></li>
<li class="subsection"><a href="following-users#sec:guide_to_further_resources"><span class="number">12.4.2</span> Guide vers d'autres ressources</a></li></ol></li>
<li class="section"><a href="following-users#sec:following_Exercices"><span class="number">12.5</span> Exercices</a></li></ol></li></ol></div>



<div id="main_content"></div>

<p> <span class="preamble">
 <span id="foreword">
<strong> Avant-propos</strong> <br />
 </span>
 </span></p>

<p>Ma précédente compagnie (CD Baby) fut une des premières à basculer intégralement vers Ruby on Rails, et à rebasculer aussi intégralement vers PHP (googlez-moi si vous voulez prendre la mesure du drame). On m'a tellement recommandé ce livre Michael Hartl que je n'ai pu faire autrement que de le lire. C'est ainsi que le <em>Tutoriel Ruby on Rails</em> m'a fait revenir à nouveau à Rails.</p>
<p>Bien qu'ayant parcouru de nombreux livres sur Rails, c'est ce tutoriel-là qui m'a véritablement «&nbsp;mis en possession&nbsp;» de Rails. Tout est fait ici «&nbsp;à la manière de Rails&nbsp;» —&nbsp;une manière qui ne m'avait jamais semblé naturelle avant que je ne lise ce livre. C'est aussi le seul ouvrage sur Rails qui met en place, d'un bout à l'autre, un <em>Développement Dirigé par les Tests</em> (<em>Test-Driven Development</em>), une approche que je savais hautement recommandée par les experts mais dont je n'avais jamais compris aussi bien la pertinence que dans ce livre. Enfin, en incluant Git, GitHub et Heroku dans les exemples de la démonstration, l'auteur vous donne vraiment le goût de ce qu'est le développement d'un projet dans la vie réelle. Et le exemples de code ne sont pas en reste.</p> 
	
<p>La narration linéaire adoptée par ce tutoriel est vraiment un bon format. Personnellement, j'ai étudié <em>Le Tutoriel Rails</em> en trois longues journées, en faisant tous les exemples et les exercices proposés à la fin de chaque chapitre. C'est en lisant ce livre du début à la fin, sans sauter la moindre partie, qu'on en tire tout le bénéfice.</p>

<p>Régalez-vous&nbsp;!</p>

<p><a href="http://sivers.org/">Derek Sivers</a> (<a href="http://sivers.org/">sivers.org</a>) <br />
<em>Précédemment&nbsp;: Fondateur de </em> <a href="http://www.cdbaby.com/"><em>CD Baby</em></a> <br />
<em>Actuellement&nbsp;: Fondateur de </em> <a href="http://thoughts.pro/"><em>Thoughts Ltd.</em></a> <br /></p>

<p> <span class="preamble">
<strong> Remerciements</strong> <br />
 </span></p>

<p>Ce <em>Tutoriel Ruby on Rails</em> doit beaucoup à mon livre précédent sur Rails, <em>RailsSpace</em>, et donc à mon co-auteur <a href="http://aure.com/">Aurelius Prochazka</a>. J'aimerais remercier Aure à la fois pour le travail qu'il a accompli sur ce précédent livre et pour son soutien pour le présent ouvrage. J'aimerais aussi remercier Debra Williams Cauley, mon éditeur pour les deux ouvrages&nbsp;; aussi longtemps qu'elle jouera avec moi au baseball, je continuerai d'écrire des livres pour elle.</p>

<p>J'aimerais remercier une longue liste de Rubyistes qui m'ont parlé et inspiré au cours des années&nbsp;: David Heinemeier Hansson, Yehuda Katz, Carl Lerche, Jeremy Kemper, Xavier Noria, Ryan Bates, Geoffrey Grosenbach, Peter Cooper, Matt Aimonetti, Gregg Pollack, Wayne&nbsp;E. Seguin, Amy Hoy, Dave Chelimsky, Pat Maddox, Tom Preston-Werner, Chris Wanstrath, Chad Fowler, Josh Susser, Obie Fernandez, Ian McFarland, Steven Bristol, Giles Bowkett, Evan Dorn, Long Nguyen, James Lindenbaum, Adam Wiggins, Tikhon Bernstam, Ron Evans, Wyatt Greene, Miles Forrest, les gens bien de Pivotal Labs, le gang Heroku, les mecs de thoughtbot et l'équipe de GitHub. Enfin, tellement, tellement, tellement de lecteurs —&nbsp;beaucoup trop pour les citer tous&nbsp;— qui ont contribué par leur rapport de bogues et leurs suggestions durant l'écriture de ce livre, et je tiens à saluer leur aide sans laquelle ce livre ne serait pas ce qu'il est. <br /></p>

<p> <span class="preamble">
 <span id="author">
<strong> À propos de l'auteur</strong> <br />
 </span>
 </span></p>

<p><a href="http://michaelhartl.com/">Michael Hartl</a> est programmeur, éducateur et entrepreneur. Il est le co-auteur de <em>RailsSpace</em>, un tutoriel Rails publié en 2007, et a été co-fondateur et développeur en chef de <a href="http://insoshi.com/">Insoshi</a>, une plateforme de réseau social <a href="http://github.com/popular/forked">populaire</a> en Ruby on Rails. Précédement, il a enseigné la théorie et la physique informatique au <a href="http://www.caltech.edu/">California Institute of Technology</a> (Caltech), où il a reçu le Lifetime Achievement Award for Excellence en enseignement. Michael est diplômé du <a href="http://college.harvard.edu/">Harvard College</a>, a un <a href="http://resolver.caltech.edu/CaltechETD:etd-05222003-161626">Ph.D. en physique</a> (un doctorat. NdT) de <a href="http://www.caltech.edu/">Caltech</a>, et il est ancien élève du programme des entrepreneurs <a href="http://ycombinator.com/">Y&nbsp;Combinator</a>. <br /></p>

<p> <span id="license" class="preamble">
<strong> Copyright et license</strong> <br />
 </span></p>

<p><em>Le Tutoriel Ruby on Rails&nbsp;: apprendre Rails par l'exemple</em>. Copyright &copy; 2010 par Michael Hartl. Tout le code source du <em>Tutoriel Ruby on Rails</em> est disponible sous la license <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a> et la licence <a href="http://en.wikipedia.org/wiki/Beerware">Beerware License</a>.</p>

<pre class="verbatim">   Copyright (c) 2010 Michael Hartl

   Permission est accordée, à titre gratuit, à toute personne obtenant
   une copie de ce logiciel et la documentation associée, pour faire des 
   modification dans le logiciel sans restriction et sans limitation des
   droits d’utiliser, copier, modifier, fusionner, publier, distribuer,
   concéder sous licence, et / ou de vendre les copies du Logiciel, et à
   autoriser les personnes auxquelles le Logiciel est meublé de le faire, 
   sous réserve des conditions suivantes:

   L’avis de copyright ci-dessus et cette autorisation doit être inclus
   dans toutes les copies ou parties substantielles du Logiciel.

   LE LOGICIEL EST FOURNI «TEL QUEL», SANS GARANTIE D’AUCUNE SORTE, 
   EXPLICITE OU IMPLICITE, Y COMPRIS, MAIS SANS S’Y LIMITER, LES 
   GARANTIES DE QUALITÉ MARCHANDE, ADAPTATION À UN USAGE PARTICULIER ET
   D’ABSENCE DE CONTREFAÇON. EN AUCUN CAS LES AUTEURS OU TITULAIRES DU
   ETRE TENU RESPONSABLE DE TOUT DOMMAGE, RÉCLAMATION OU AUTRES
   RESPONSABILITÉ, SOIT DANS UNE ACTION DE CONTRAT, UN TORT OU AUTRE,
   PROVENANT DE, DE OU EN RELATION AVEC LE LOGICIEL OU L’UTILISATION OU
   DE TRANSACTIONS AUTRES LE LOGICIEL.
	
</pre>




<pre class="verbatim">/*
 * ------------------------------------------------------------
 * &quot;LA LICENCE BEERWARE&quot; (Révision 42)&nbsp;:
 * Michael Hartl a écrit ce code. Aussi longtemps que vous
 * conservez cette note, vous pouvez faire ce que vous voulez
 * de ce travail. Si nous nous rencontrons un jour, et que vous
 * pensez que ce travail en vaut la peine, vous pourrez me
 * payer une bière en retour.
 * ------------------------------------------------------------
 */</pre>




<div id="top"></div>


<h1 class="chapitre"><a id="sec:1" href="beginning#top" class="heading"><span class="number">chapitre 1</span> De zéro au déploiement</a></h1>


<p>Bienvenue dans <a href="http://railstutorial.org/book"><em>Le Tutoriel Ruby on Rails&nbsp;: Apprendre Rails par l'exemple</em></a>. Le but de ce livre est d'être la meilleure réponse à la question&nbsp;: «&nbsp;Si je veux apprendre le développement web avec <a href="http://rubyonrails.org/">Ruby on Rails</a>, par où dois-je commencer&nbsp;?&nbsp;» Quand vous aurez achevé <em>Le Turoriel Ruby on Rails</em>, vous aurez toutes les connaissances nécessaires pour développer et déployer votre propre application web. Vous serez également en mesure de tirer profit de livre plus avancés, des blogs et des <em>screencasts</em> qui peuplent le écosystème Rails, prospère. Enfin, puisque le <em>Tutoriel Ruby on Rails</em> utilise Rails&nbsp;3.0, la connaissance que vous acquiererez sera pleinement d'actualité avec la dernière et meilleure version de Rails.<sup class="footnote" id="fnref:1.1"><a href="#fn:1.1">1</a></sup></p>

<p>Le <em>Tutoriel Ruby on Rails</em> suit essentiellement la même approche que mon livre précédent,<sup class="footnote" id="fnref:1.2"><a href="#fn:1.2">2</a></sup> enseignant le développement web avec Rails en construisant un exemple d'application conséquente, depuis le tout départ. Comme <a href="http://sivers.org">Derek Sivers</a> le souligne dans l'avant-propos, ce livre est structuré en <em>narration linéaire</em>, destinée en conséquence à être lue du début à la fin. Si vous avez l'habitude de survoler les livres techniques, suivre cette approche linéaire peut vous demander quelques ajustements, mais je ne saurais trop vous recommander d'essayer. Vous pouvez penser au <em>Tutoriel Ruby on Rails</em> comme un jeu vidéo dont vous êtes le héros, et où vous augmentez votre niveau de développeur Rails à chaque chapitre (les exercices sont comme des <a href="http://fr.wikipedia.org/wiki/Boss">mini-boss</a>).</p>

<p>Dans le premier chapitre, nous commencerons avec Ruby on Rails en installant tous les softwares nécessaires et en préparant votre environnement de développement (<a class="ref" href="beginning#sec:up_and_running">section&nbsp;1.2</a>). Nous créerons alors notre première application Rails, appelée (de façon assez pertinente ma foi) <tt>first_app</tt> (<em>première_application</em>). Le <em>Tutoriel Rails</em> met l'accent sur les bonnes pratiques de développement, aussi, immédiatement après avoir créé notre tout nouveau projet Rails nous le déposerons sous un <em>contrôle de version</em>  avec Git (<a class="ref" href="beginning#sec:version_control">section&nbsp;1.3</a>). Et, croyez-le ou non, dans ce chapitre nous <em>déploierons</em> même notre première application en mode «&nbsp;production&nbsp;» (<a class="ref" href="beginning#sec:deploying">Section&nbsp;1.4</a>).</p>

<p>Au <a class="ref" href="a-demo-app#top">chapitre&nbsp;2</a>, nous créerons un second projet, dont le but sera d'illustrer les fonctions élémentaires d'une application Rails. De façon très rapide, nous construirons cette <em>application démo</em> (qui s'appellera <tt>demo_app</tt>) en utilisant le <em>système d'échaffaudage</em> («&nbsp;scaffolding&nbsp;») (<a class="ref" href="beginning#sidebar:scaffolding">Box&nbsp;1.1</a>) pour générer automatiquement le code&nbsp;; comme ce code est aussi laid que complexe, le <a class="ref" href="a-demo-app#top">chapitre&nbsp;2</a> se concentrera plutôt sur l'interaction avec l'application démo par le biais des <em>URLs</em><sup class="footnote" id="fnref:1.3"><a href="#fn:1.3">3</a></sup> en utilisant un navigateur internet.</p>

<p>Au <a class="ref" href="static-pages#top">chapitre&nbsp;3</a>, nous créerons une <em>application exemple</em> (que nous appellerons <tt>sample_app</tt>), en écrivant cette fois tout le code à partir de (presque) rien. Nous développerons cette application exemple en utilisant le <em>Développement dirigé par les tests</em> («&nbsp;<em>test-driven development</em>&nbsp;», TDD), amorcé au <a class="ref" href="static-pages#top">chapitre&nbsp;3</a> en créant des pages statiques puis en ajoutant un peu de contenu dynamique. Nous ferons un rapide détour au <a class="ref" href="rails-flavored-ruby#top">chapitre&nbsp;4</a> pour en apprendre un peu plus sur le langage Ruby sous-jacent à Rails. Puis, du <a class="ref" href="filling-in-the-layout#top">chapitre&nbsp;5</a> au <a class="ref" href="updating-showing-and-deleting-users#top">chapitre&nbsp;10</a>, nous complèterons les fondations de l'application exemple en fabricant un <em>layout</em> (une mise en page) pour le site, un modèle de données utilisateur («&nbsp;user data model&nbsp;») et un système complet et fonctionnel d'enregistrement et d'authentification. Enfin, aux <a class="ref" href="user-microposts#top">chapitre&nbsp;11</a> et <a class="ref" href="following-users#top">chapitre&nbsp;12</a> nous incorporerons des outils de micro-blogging (un système de mini-messages) et de réseau social pour faire un exemple de site tout à fait fonctionnel.</p>

<p>L'application exemple finale aura plus d'une ressemblance avec <a href="http://twitter.com/">une certaine application sociale de micro-blogging</a> &mdash;&nbsp;un site qui, est-ce un hasard, est également écrit en Rails. Bien que nos efforts se concentrent nécessairement sur cette application exemple spécifique, l'accent dans ce <em>Tutoriel Rails</em> sera mis sur des principes généraux, donc vous acquièrerez des notions fondamentales et solides qui vous permettrons de développer vos propres applications web, quels que soient leur genres.</p>

<div class="label" id="sidebar:scaffolding"></div>


<div class="sidebar"><span class="title"><span class="header">Box 1.1.</span><span class="description">Échaffaudage (<em>Scaffolding</em>)&nbsp;: Plus rapide, plus facile, plus séduisant</span></span>
<p>Depuis le départ, Rails a bénéficié d'un engouement évident, notamment gràce au fameux <a href="http://media.rubyonrails.org/video/rails_take2_with_sound.mov">Un Weblog vidéo en 15 minutes</a> par le créateur de Rails David Heinemeier Hansson, actualisé à présent dans le <a href="http://media.rubyonrails.org/video/rails_blog_2.mov">Un Weblog en 15 minutes en utilisant Rails&nbsp;2</a> par Ryan Bates. Ces vidéos sont une excellent façon de goûter à la puissance de Rails, et je recommande vivement de les regarder. Mais soyez averti quand même&nbsp;: ils accomplissent leur incroyable coup d'adresse de quinze minutes en utilisant l'outil appelé  <em>scaffolding</em> (<em>Échaffaudage</em>), bâti essentiellement sur un <em>code automatiquement généré</em>, créé comme par magie par la commande Rails <code>generate</code> (<em>Générer</em>).</p>

<p>En écrivant un tutoriel sur Ruby on rails, il est tentant de s'appuyer sur l'approche par échaffaudage &mdash;&nbsp;elle est <a href="http://en.wikipedia.org/wiki/Dark_side_(Star_Wars)">plus rapide, plus facile, et plus séduisante</a>. Mais la complexité et l'énorme quantité de code d'un échaffaudage peut être  rédhibitoire pour un développeur Rails débutant&nbsp;; vous pouvez peut-être l'utiliser, mais vous serez incapable de le comprendre. Suivre l'approche par échaffaudage risque de vous tourner vers un script générateur de code virtuose au détriment d'une véritable connaissance de Rails.</p>

<p>Dans le <em>Tutoriel Ruby on Rails</em>, nous adopterons l'approche presque exactement opposée&nbsp;: bien que le <a class="ref" href="a-demo-app#top">chapitre&nbsp;2</a> développera une petite <em>application démo</em>  en utilisant le système d'échaffaudage, le cœur de ce tutoriel est l'<em>Application Exemple</em>, que nous commencerons à concevoir au <a class="ref" href="static-pages#top">chapitre&nbsp;3</a>. À chaque étape du développement de cette application exemple, nous générerons le code bouchée après bouchée, petite pièce de code par petite pièce de code &mdash;&nbsp;assez simple pour être compris, mais assez nouveau pour représenter une difficulté à surmonter. L'effet de cette approche par couches résultera en une approche profonde, et une connaissance flexible de Rails, vous fournissant de bonnes connaissances fondamentales pour concevoir pratiquement n'importe quel type d'application web.</p>
</div>




<div class="label" id="sec:introduction"></div>


<h2><a id="sec:1.1" href="beginning#sec:introduction" class="heading"><span class="number">1.1</span> Introduction</a></h2>


<p>Depuis ses début en 2004, Ruby on Rails est rapidement devenu un des <a hef="http://fr.wikipedia.org/wiki/Framework">frameworks</a> les plus populaires et les plus puissants pour construire des applications web dynamiques. Les utilisations de Rails couvrent un large éventail d'applications, depuis la start-up bagarreuse jusqu'aux énormes compagnies&nbsp;: <a href="http://posterous.com/">Posterous</a>, <a href="http://uservoice.com/">UserVoice</a>, <a href="http://37signals.com/">37signals</a>, <a href="http://shopify.com/">Shopify</a>, <a href="http://scribd.com/">Scribd</a>, <a href="http://twitter.com/">Twitter</a>, <a href="http://hulu.com/">Hulu</a>, the <a href="http://yellowpages.com/">Yellow Pages</a> (les Pages Jaunes) &mdash;&nbsp;la <a href="http://rubyonrails.org/applications">liste des sites utilisant Rails</a> s'allongent de jour en jour. Il y a aussi de nombreux producteurs de développements web qui se spécialisent en Rails, tels que <a href="http://entp.com/">ENTP</a>, <a href="http://thoughtbot.com/">thoughtbot</a>, <a href="http://pivotallabs.com/">Pivotal Labs</a> ou <a href="http://hashrocket.com/">Hashrocket</a>, sans compter les innombrables consultants indépendants, entraineurs et entrepreneurs.</p>

<p>Qu'est-ce qui rend Rails si fantastique&nbsp;? Tout d'abord, Ruby on Rails est 100% en «&nbsp;open-source&nbsp;», accessible sous la licence <a href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>, e qui signifie qu'il ne coûte rien de le télécharger et de l'utiliser. Rails doit également le plus gros de son succès à son design compact et élégant&nbsp;; en exploitant la maléabilité de la sous-couche en langage <a href="http://ruby-lang.org/">Ruby</a>, Rails crée de façon effective un <a href="http://en.wikipedia.org/wiki/Domain_Specific_Language">langage de domaine spécifique</a> pour écrire des applications web. Il en résulte que de nombreuse tâches courantes de programmation web &mdash;&nbsp;telles que générer du code HTML, faire des modèles de données ou rediriger les URLs&nbsp;&mdash; deviennent faciles avec Rails, et le code de l'application produit est concis et lisible.</p>

<p>Rails s'adapte également avec rapidité aux développements les plus récents de la technologie internet et à la conception par framework. Rails a par exemple été l'un des premiers frameworks à digérer et implémenter en totalité l'architecture de style REST pour structurer les applications web  (ce que nous apprendrons à faire au cours de ce tutoriel). Et quand d'autres framewords développent avec succès de nouvelles technologies, le créateur de Rails, <a href="http://loudthinking.com/">David Heinemeier Hansson</a> ainsi que le <a href="http://rubyonrails.org/core">cœur de l'équipe Rails</a> n'hésite jamais à incorporer à Rails leurs nouvelles idées. Peut-être l'exemple le plus parlant est la fusion  de Rails et de Merb, un framework concurrent, de telle sorte que Rails bénéficie maintenant de la conception modulaire de Merb, <a href="http://en.wikipedia.org/wiki/Application_programming_interface">API</a> stable et aux performances améliorées. Quiconque a assisté à la conférence donnée par le développeur de Merb et le noyau dur de l'équipe <a href="http://yehudakatz.com/">Yehuda Katz</a> n'a pu faire autrement que de noter à quel point ce fut une <em>extrêmement</em> bonne idée de monter l'équipe de Merb à bord.</p>

<p>Enfin, Rails bénéficie d'une communauté exceptionnellement enthousiaste et diverse. Les résultats en sont des centaines de  <a href="http://contributors.rubyonrails.org/">contributeurs</a> open-source, des <a href="http://railsconf.com/">conférences</a> largement suivies, un nombre considérable de <a href="http://agilewebdevelopment.com/plugins">plugins</a> et des <a href="http://rubygems.org/">gems</a> (solutions clé-en-main pour des problèmes spécifiques comme la pagination ou le téléchargement d'images), une riche variété de blogs d'information, et une corne d'abandonce débordant de forums de discussions et de canaux de discussion IRC. Le grand nombre de développeurs Rails rend également plus facile la résolution des erreurs inévitables de toute l'application&nbsp;: l'algorithme «&nbsp;Googlelisez votre message d'erreur&nbsp;» renvoie pratiquement toujours vers le message pertinent d'un blog ou un sujet de discussion dans un forum.</p>

<div class="label" id="sec:comments_for_various_readers"></div>


<h3><a id="sec:1.1.1" href="beginning#sec:comments_for_various_readers" class="heading"><span class="number">1.1.1</span> Commentaires pour la grande variété de lecteurs</a></h3>


<p>Le <em>Tutoriel Rails</em> contient des «&nbsp;tutoriels intégrés&nbsp;» non seulement pour Rails, mais aussi pour le langage sous-jacent Ruby, aussi bien que pour  <a href="http://en.wikipedia.org/wiki/HTML">HTML</a>, <a href="http://en.wikipedia.org/wiki/CSS">CSS</a>, un peu de <a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a>, et même un peu de <a href="http://en.wikipedia.org/wiki/SQL">SQL</a>. Cela signifie que, quelles que soient vos connaissances en matière de développement web, en finissant ce tutoriel vous serez en mesure d'utiliser des ressources Rails plus avancées, et prêts de la même manière à approfondir de façon plus systématique tous les autres sujets abordés.</p>

<p>Rails titre une grande partie de son pouvoir de la «&nbsp;magic&nbsp;» &mdash;&nbsp;il en va ainsi des capacités du framework (telles que déduire automatiquement les attributs d'un objet à partir du nom des colonnes de la base de données) qui accomplissent des miracles mais dont les mécanismes peuvent rester plutôt obscures. Le <em>Tutorial Ruby on Rails</em> n'est <em>pas</em> destiné à expliquer cette magie &mdash;&nbsp;principalement parce que la plupart des développeurs d'applications Rails n'ont jamais besoin de savoir ce qui se passe en coulisses (après tout, le langage Ruby lui-même est écrit principalement en langage de programmation C, mais vous n'avez pas besoin de creuser dans le code source en C pour utiliser Ruby). Si vous êtes le genre de personne qui aime bien tirer les choses de derrière le rideau, je vous recommande la lecture de <a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a> par Obie Fernandez qui accompagnera avec profit ce <em>Tutoriel Ruby on Rails</em>.</p>

<p>Bien que ce livre ne nécessite pas de requis spéciaux, vous devez bien entendu posséder au moins quelque expérience des ordinateurs. Si vous n'avez même jamais utilisé d'éditeur de texte, ce ne sera pas facile pour vous d'avancer, mais avec un peu de détermination vous devriez pouvoir passer à travers. Si, d'un autre côté, votre fichier <code>.emacs</code> est tellement complexe qu'il pourrait faire pleurer un adulte, il vous restera toujours ici quelque défi à relever. Le <em>Tutoriel Rails</em> est destiné à enseigner le développement Rails quels que soient ses acquis propres, mais l'expérience que vous ferez de cette lectutre dépendra de vos aptitudes particulières. <br /></p>

<p><strong>À tous les lecteurs&nbsp;:</strong> une question classique en étudiant Rails est de savoir s'il faut étudier Ruby au préalable. La réponse dépend de la façon dont vous apprenez. Si vous avez une prédilection pour apprendre tout depuis la base, de façon systématique, alors apprendre le langage Ruby peut vous être utile&nbsp;; plusieurs livres sont recommandés dans cette section pour vous faire débuter. D'un autre côté, de nombreux développeurs Rails débutants sont excités à l'idée de créer des applications <em>web</em>, et préfèreront ne pas se coltiner un livre de 500 pages en pur Ruby avant d'écrire la moindre page sur une simple page web. Plus encore, le sous-ensemble de Ruby nécessaire aux développeurs Rails est différent de ce que vous pourriez trouver dans une introduction sur du pur Ruby, tandis que le  <em>Tutoriel Rails</em> se concentre exclusivement sur ce sous-ensemble. Si votre intérêt  premier est de construire des applications Rails, je vous recommande de commencer par ce <em>Tutoriel Rails</em> et de lire des livres de pur Ruby ensuite. Ce n'est pas une proposition «&nbsp;tout ou rien&nbsp;», pour autant&nbsp;: si vous commencez à lire ce <em>Tutoriel Rails</em> et sentez votre manque de connaissance du Ruby vous ralentir, soyez libre de basculer vers un livre sur le langage Ruby avant de revenir au tutoriel lorsque vous vous sentirez plus à l'aise. Vous pouvez aussi vous contenter d'un goût de ce qu'est Ruby en suivant un court tutoriel en ligne, tels que ceux qu'on peut trouver sur les sites <a href="http://www.ruby-lang.org/">http://www.ruby-lang.org/</a> ou <a href="http://rubylearning.com/">http://rubylearning.com/</a>.</p>

<p>Une autre question classique concerne l'utilisation des tests dès le départ. Comme cela est indiqué dans l'introduction, ce <em>Tutoriel Rails</em> fait appel au «&nbsp;Test Dirigé par le Développement&nbsp;» (<em>test-driven development</em>, appelé aussi <em>test-first development</em>), qui selon moi est la meilleure façon de développer des applications Rails, mais le fait est que cette approche introduit une quantité substantielle de difficulté et de complexité. Si vous sentez que vous vous enlisez à cause des tests, sentez-vous libre de les sauter dans une première lecture.<sup class="footnote" id="fnref:1.4"><a href="#fn:1.4">4</a></sup> Vraiment, certains lecteurs se sentent dans un premier temps écrasés par l'inclusion de nombreux concepts et de pratiques nouvelles &mdash;&nbsp;telles que les tests, les contrôles de versions, le déploiement. Aussi, si vous vous rendez compte que vous dépensez une énergie excessive sur toutes ces étapes, <em>n'hésitez pas à les passer</em>. Bien que j'ai inclus seulement le matériel que je considère essentiel au développement d'un niveau professionnel d'une application Rails, seul le cœur du code de l'application est strictement nécessaire dans une première lecture. <br /></p>

<p><strong>Aux programmeurs non expérimentés (non-concepteurs)&nbsp;:</strong> ce <em>Tutoriel Rails</em> n'exige aucun autre background qu'une connaissance générale de l'ordinateur, donc si vous avez une expérience limitée de la programmation ce livre est une bonne façon de commencer. Gardez à l'esprit que c'est seulement la première étape d'un long voyage&nbsp;; le développement web possède de nombreux aspects différents, parmi lesquels le HTML/CSS, JavaScript, les bases de données (et SQL), les contrôles de version et le déploiement. Ce livre contient de courtes introductions à ces sujets, mais il y a bien plus encore à connaitre.<br /></p>

<p><strong>Aux programmeurs non expérimentés (concepteurs)&nbsp;: </strong> vos aptitudes en matière de conception web vous donnent une longueur d'avance, puisque vous connaissez certainement déjà le HTML et les CSS. Après avoir fini ce livre, vous serez dans une excellente position pour travailler sur des projets Rails existants et pourrez probablement en amorcer un de votre propre chef. Vous pouvez trouver difficile tout ce qui concerne la programmation, mais le langage Ruby est exceptionnellement accessible aux débutants, tout spécialement ceux qui possèdent une fibre artistique.<br /></p>

<p>Après avoir achevé la lecture du <em>Tutoriel Ruby on Rails</em>, je recommande aux nouveaux programmeurs la lecture de <a href="http://www.amazon.com/gp/product/1430223634?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1430223634"><em>Beginning Ruby</em></a> de Peter Cooper, qui partage la même philosophie pédagogique que ce <em>Tutoriel Rails</em>. Je recommande aussi <a href="http://www.amazon.com/gp/product/B000P28V8Q?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B000P28V8Q"><em>The Ruby Way</em></a> de Hal Fulton. Enfin, pour acquérir une compréhension plus profonde de Rails je recommande <a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a> de Obie Fernandez.</p>

<p>Les applications Web, même les relativement simples, sont de par nature assez complexes. Si vous êtes tout à fait nouveau dans la programmation web et trouvez trop complexe la lecture de ce <em>Tutoriel Rails</em>, c'est peut-être que vous n'êtes pas tout à fait prêts encore à développer des applications web. Dans ce cas, je vous suggère d'apprendre les bases du HTML et des CSS et de recommencer ensuite seulement la lecture de ce tutoriel (malheureusement, je n'ai pas de recommandations particulières ici, mais <a href="http://headfirstlabs.com/books/hfhtml/"><em>Head First HTML</em></a> semble prometteur, et un des lecteurs recommande <a href="http://www.amazon.com/gp/product/0596526873?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0596526873"><em>CSS: The Missing Manual</em></a> de David Sawyer McFarland). Vous pouvez aussi lire avec profit les premiers chapitres de <a href="http://www.amazon.com/gp/product/1430223634?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1430223634"><em>Beginning Ruby</em></a>, qui débute avec l'exemple d'une application plus petite qu'une application web au sens fort du terme. <br /></p>

<p><strong>Aux programmeurs expérimentés découvrant le développement web&nbsp;:</strong> votre expérience signifie que vous comprenez probablement déjà les concepts de <em>classes</em>, de <em>méthodes</em>, de <em>structures de données</em>, etc., ce qui constitue un sérieux avantage. Soyez tout de même avertis, dans le cas où votre background est le C/C++ ou le Java, que vous pourriez trouver que le langage Ruby ressemble un peu à un canard boiteux, et sa prise en main pourrait vous prendre du temps&nbsp;; familiarisez-vous juste avec lui, et tout devrait aller pour le mieux (Ruby vous autorise même à mettre des points-virgule à la fin des lignes s'ils vous manquent trop&nbsp;!). Ce <em>Tutoriel Rails</em> couvre toutes les idées spécifiques au développement web dont vous avez besoin, donc ne vous inquiétez pas si vous ne distinguez pas pour le moment une requête <tt>PUT</tt> d'une requête <tt>POST</tt>.<br /></p>

<p><strong>Aux développeurs web expérimentés découvrant Rails&nbsp;:</strong> vous avez une sérieuse longueur d'avance, tout spécialement si vous avez utilisé un langage dynamique tel que le PHP ou (encore mieux) le langage Python. Les bases de ce que nous couvrons vous seront pour le moins familières, mais le développement par le test (Développement Dirigé par le Test, ou TDD) sera peut-être nouveau pour vous, comme peut l'être aussi l'architecture REST préconisé par Rails. Ruby possède également sa propre idiosyncrasie, peut-être sera-t-elle aussi nouvelle pour vous.<br /></p>

<p><strong>Aux programmeurs Ruby expérimentés&nbsp;:</strong> l'ensemble des programmeurs Ruby ne connaissant pas Rails est très restreint de nos jours, mais si vous faites partie de ce groupe d'élite, vous pouvez survoler ce livre et vous diriger ensuite sur le livre <a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a> de Obie Fernandez. <br /></p>

<p><strong>Aux programmeurs Rails inexpérimentés&nbsp;:</strong> vous avez peut-être lu d'autres tutoriels et créé quelques petites applications Rails. En me basant sur le retour des lecteurs, je suis confiant sur le fait que vous pourrez tirer beaucoup de ce livre. Parmi d'autres choses, les techniques employées ici sont peut-être plus d'actualité que celles que vous avez abordés quand vous avez appris Rails. <br /></p>

<p><strong>Aux programmeurs Rails expérimentés&nbsp;:</strong> ce livre ne vous sera pas utile, et pourtant, de nombreux développeurs Rails expérimentés m'ont exprimé leur surprise quant à la quantité de choses qu'ils avaient tirés de ce livre, et vous pourriez être ravis d'aborder Rails sous un autre jour, dans une autre perspective. <br /></p>

<p>Après avoir terminé ce <em>Tutoriel Ruby on Rails</em>, je recommande aux programmeurs (non Ruby) expérimentés la lecture de <a href="http://www.amazon.com/gp/product/1933988657?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1933988657"><em>The Well-Grounded Rubyist</em></a> de David&nbsp;A. Black, qui est une excellente et profonde discussion sur Ruby depuis la base, ou <a href="http://www.amazon.com/gp/product/B000P28V8Q?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B000P28V8Q"><em>The Ruby Way</em></a> de Hal Fulton, qui est tout aussi avancé mais adopte une approche plus actuelle. Passez ensuite à <a href="http://www.amazon.com/gp/product/0321601661?ie=UTF8&amp;tag=httpwwwrailst-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321601661"><em>The Rails&nbsp;3 Way</em></a> pour approfondir encore votre expertise de Rails.<br /></p>

<p>À la fin de ce processus, quel que soit d'où vous partiez, vous serez en mesure d'appréhender les ressources Rails plus avancées. Voilà celle que je recommande particulièrement&nbsp;:</p>

<ul>

<li><a href="http://railscasts.com/">Railscasts</a>&nbsp;: d'excellents screencats gratuits sur Rails&nbsp;;</li>
<li><a href="http://peepcode.com/">PeepCode</a>, <a href="http://pragmatic.tv/">Pragmatic.tv</a>, <a href="http://envycasts.com/">EnvyCasts</a>&nbsp;: d'excellent screencasters payants&nbsp;;</li>
<li><a href="http://guides.rubyonrails.org/">Rails Guides</a>&nbsp;: bonnes références sur Rails, d'actualité et actualisées. Ce <em>Tutoriel Rails</em> fait fréquemment référence au <em>Rails Guides</em> pour un traitement plus en profondeur de certains sujets&nbsp;;</li>
<li><a href="http://www.google.com/search?q=ruby+on+rails+blogs">Rails blogs</a>&nbsp;: trop de choses à énumérer, et quelles choses&nbsp;! </li>

</ul>




<h3><a id="sec:1.1.2" href="beginning#sec:1.1.2" class="heading"><span class="number">1.1.2</span> ¡&nbsp;Mise à l'échelle&nbsp;» (<em>Scaling</em>) de Rails</a></h3>


<p>Avant de poursuivre avec la suite de l'introduction, j'aimerais m'arrêter un moment sur un problème qui collait au framework Rails à ses tout débuts&nbsp;: sa supposée inaptitude à se «&nbsp;mettre à l'échelle&nbsp;» &mdash;&nbsp;pour, par exemple, absorber un trafic important. Une partie de cette question repose sur une idée tout à fait fausse&nbsp;; <a href="http://idleprocess.wordpress.com/2009/11/24/presentation-summary-high-performance-at-massive-scale-lessons-learned-at-facebook/">vous mettez à l'échelle <em>un site</em>, pas un framework</a>, et Rails, aussi intelligent soit-il, n'est qu'un framework. Donc la vraie question aurait dû être «&nbsp;Est-ce qu'un site construit en Rails peut se mettre à l'échelle&nbsp;?&nbsp;». Dans ce cas, la réponse est résolument «&nbsp;oui&nbsp;»&nbsp;: quelques uns des sites les plus lourds en trafic dans le monde utilisent Rails. En fait, <em>rendre</em> la mise à l'échelle possible va bien au-delà du champ d'application de Rails, mais soyez assurés que si <em>votre</em> application connait un trafic similaire à celui de Hulu ou des «&nbsp;Pages jaunes&nbsp;», Rails ne sera pas un handicap pour vous étendre au travers du monde.</p>

<div class="label" id="sec:conventions"></div>


<h3><a id="sec:1.1.3" href="beginning#sec:conventions" class="heading"><span class="number">1.1.3</span> Conventions utilisées dans ce livre</a></h3>


<p>Les conventions de ce livre s'expliquent la plupart du temps d'elles-mêmes&nbsp;; dans cette section, je mentionne celles qui ne le pourraient pas.</p>

<p>Les éditions <a href="http://railstutorial.org/book">HTML</a> et <a href="http://railstutorial.org/">PDF</a> de ce livre sont riches en liens, vers des sections internes (telles que <a class="ref" href="beginning#sec:up_and_running">Section&nbsp;1.2</a>) aussi bien que des sites externes (tels que la page principale <a href="http://rubyonrails.org/download">Télécharger Ruby on Rails</a>).<sup class="footnote" id="fnref:1.5"><a href="#fn:1.5">5</a></sup></p>

<p>De nombreux exemples de ce livre utilisent la «&nbsp;ligne de commande&nbsp;». Pour la simplicité, tous les exemples en ligne de commande utilisent l'invite classique Unix (un dollar), comme suit&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;bonjour le monde&quot;</span>
<span class="go">bonjour le monde</span>
</pre></div>
</div>


<p>Les utilisateurs Windows doivent savoir que leur système utilisera l'invite analogue&nbsp;«&nbsp;<tt>&gt;</tt>&nbsp;»&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="go">C:\Sites&gt;echo Salut le monde</span>
<span class="go">Salut le monde</span>
</pre></div>
</div>


<p>Sur les systèmes d'exploitation Unix, certaines commandes devront être exécutées avec <code>sudo</code>, qui signifie «&nbsp;substitute user do&nbsp;» (<em>L'utilisateur de substition fait…</em>). Par défaut, une commande exécutée avec <code>sudo</code> est jouée comme par un utilisateur-administrateur, qui a accès à des fichiers et des dossiers que les utilisateurs normaux ne peuvent pas toucher. Pour indiquer que l'utilisation de <code>sudo</code> dépendra de votre système, elle se présentera entre crochets quand elle peut être (ou ne pas être) nécessaire sur votre propre système, comme dans l'exemple de la <a class="ref" href="beginning#sec:rubygems">section&nbsp;1.2.2</a>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> ruby setup.rb
</pre></div>
</div>


<p>La plupart des systèmes d'exploitation Unix/Linux/Os&nbsp;X requièrent la commande <code>sudo</code> par défaut, sauf si vous utilisez le <em>Ruby Version Manager</em> comme cela est suggéré dans la <a class="ref" href="beginning#sec:install_ruby">section&nbsp;1.2.2.3</a>. Notez que vous ne devez <em>pas</em> utiliser les crochets&nbsp;; vous devez utiliser soit…</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> sudo ruby setup.rb
</pre></div>
</div>


<p>soit…</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ruby setup.rb
</pre></div>
</div>


<p>… en fonction de votre système d'exploitation.</p>

<p>Rails est fourni avec un grand nombre de commandes qui peuvent être jouées en ligne de commande. Par exemple, dans la <a class="ref" href="beginning#sec:rails_server">section&nbsp;1.2.5</a> nous lancerons un serveur web local en mode développement comme suit&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="nv">$ </span>rails server
</pre></div>
</div>


<p>Comme pour l'invite de la commande en ligne, ce <em>Tutoriel Rails</em> utilise la convention Unix pour les séparateurs de dossiers (c'est-à-dire une balance&nbsp;<tt>/</tt>). Ma propre <em>Application exemple</em> développée dans ce tutoriel, par exemple, se trouve dans&nbsp;:</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app</pre>


<p>Sur Windows, l'adresse du dossier analogue devrait être&nbsp;:</p>

<pre class="verbatim">C:\Sites\sample_app</pre>


<p>Le dossier racine pour toute application donnée est connue comme la <em>racine Rails</em> (<em>Rails root</em>), et désormais tous les chemins d'accès seront relatifs à ce dossier (notez bien que la «&nbsp;racine Rails&nbsp;» n'est <em>pas</em> le dossier racine du framework Rails lui-même). Par exemple, le dossier <code>config</code> de mon application exemple est&nbsp;:</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app/config</pre>


<p>La racine Rails est ici ce qui se trouve avant <code>config</code>, c'est-à-dire&nbsp;:</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app</pre>


<p>Par souci de brièveté, quand nous ferons référence au fichier&nbsp;:</p>

<pre class="verbatim">/Users/mhartl/rails_projects/sample_app/config/routes.rb</pre>


<p>… nous omettrons la racine Rails et écrirons simplement <code>config/routes.rb</code>.</p>

<p>Pour finir, ce <em>Tutoriel Rails</em> montre souvent les sorties (les résultats) de programmes variés (commandes shell, état de contrôle de version, programmes Ruby, etc.). À cause des innombrables petites différences entre les différents systèmes d'exploitation, la sortie que vous obtiendrez ne coïncidera pas toujours avec ce qui sera montré dans le texte, mais il n'y a aucune raison de s'en pré-occuper. De surcroît, certaines commandes pourrons produire des erreurs en fonction de votre système&nbsp;; plutôt que d'essayer la tâche <a href="http://en.wikipedia.org/wiki/Sisyphus">Sisyphéenne</a> de documenter tous ces types d'erreurs dans ce tutoriel, je délèguerai cette tâche à l'algorithme «&nbsp;Google le message d'erreur&nbsp;», qui est, parmi d'autres choses, une bonne pratique dans le développement grandeur nature de logiciel.</p>

<div class="label" id="sec:up_and_running"></div>


<h2><a id="sec:1.2" href="beginning#sec:up_and_running" class="heading"><span class="number">1.2</span> Debout et au boulot</a></h2>

<p>Le temps est venu d'aborder l'environnement de développement Ruby on Rails et notre première application. Il y a quelques casse-têtes ici, spécialement si vous n'avez pas une expérience étendue de la programmation, donc ne vous découragez pas si cela vous demande un moment avant de pouvoir réellement démarrer. Ça ne vous concerne pas en particulier&nbsp;; tout développeur doit en passer par là (et souvent plus d'une fois), mais soyez assuré que les efforts seront richement récompensés.</p>

<div class="label" id="sec:development_tools"></div>


<h3><a id="sec:1.2.1" href="beginning#sec:development_tools" class="heading"><span class="number">1.2.1</span> Les environnements de développement</a></h3>


<p>En prenant en compte la grande variété des personnalisations possibles, il existe au moins autant d'environnements de développement que de programmeurs Rails, mais il se dégage tout de même deux méthodes principales&nbsp;: les environnements à base d'éditeur de texte/ligne de commande, et les environnements de développement intégrés (IDEs). Considérons d'abord le second.</p>

<h4><a id="sec:1.2.1.1" href="beginning#sec:1.2.1.1" class="heading">IDEs</a></h4>


<p>Les IDEs Rails ne manquent pas, incluant <a href="http://www.aptana.com/rails/">RadRails</a>, <a href="http://www.jetbrains.com/ruby/index.html">RubyMine</a>, et <a href="http://www.codegear.com/products/3rdrail">3rd Rail</a>. Tous sont «&nbsp;cross-platform&nbsp;» (utilisables sur n'importe quel système. NdT), et j'ai entendu dire du bien de quelques uns d'entre eux. Je vous encourage à les essayer s'ils fonctionnent pour vous, mais j'ai une confession à vous faire&nbsp;: je n'ai jamais trouvé un IDE qui me permette de satisfaire tous mes besoins en matière de développement Rails &mdash;&nbsp;et pour certains projets je n'ai pas même été capable de les faire fonctionner.</p>

<h4><a id="sec:1.2.1.2" href="beginning#sec:1.2.1.2" class="heading">Éditeurs de texte et ligne de commande</a></h4>


<p>Que devons-nous utiliser alors pour remplacer ces IDE tout-en-un&nbsp;? Je parierai que la majorité des développeurs Rails ont opté pour la même solution que moi&nbsp;: utiliser un <em>éditeur de texte</em> pour éditer le texte, et une <em>ligne de commande</em> pour exécuter des commandes (<a class="ref" href="beginning#fig:editor_shell">Illustration&nbsp;1.1</a>). La combinaison que vous utiliserez dépendra de vos goûts et de votre plate-forme&nbsp;:</p>

<ul>
<li><strong>Macintosh OS&nbsp;X&nbsp;:</strong> comme beaucoup de développeurs Rails, j'ai une préférence pour <a href="http://macromates.com/">TextMate</a>. D'autres options incluent Emacs et  <a href="http://code.google.com/p/macvim/">MacVim</a> (chargé par la commande <code>mvim</code>), l'excellente version Macintosh de Vim.<sup class="footnote" id="fnref:1.6"><a href="#fn:1.6">6</a></sup> J'utilise <a href="http://iterm.sourceforge.net/">iTerm</a> comme terminal de ligne de commande&nbsp;; d'autres affectionnent l'application native «&nbsp;Terminal&nbsp;».</li>

<li><strong>Linux&nbsp;:</strong> vos options d'édition sont à la base les mêmes que pour les OS&nbsp;X, à l'exception de TextMate. Je recommande «&nbsp;graphical Vim&nbsp;» (gVim), <a href="http://projects.gnome.org/gedit/">gedit</a> (avec le plugin <a href="http://blog.siverti.com.br/gmate/">GMate</a>), ou <a href="http://kate-editor.org/">Kate</a>. En terme de ligne de commande, vous devez déjà être totalement équipés&nbsp;: toute distribution Linux est fournie avec une application terminal de ligne de commande (et même souvent plusieurs).</li>

<li><strong>Windows&nbsp;:</strong> Certains éditeurs prometteurs sur Windows sont <a href="http://www.vim.org/download.php#pc">Vim</a>, le <a href="http://www.e-texteditor.com/">E&nbsp;Text Editor</a>, <a href="http://www.activestate.com/komodo_edit/">Komodo Edit</a>, et <a href="http://www.sublimetext.com/">Sublime Text</a>. Pour les lignes de commande, je recommande d'utiliser l'invite fournie avec <a href="http://railsinstaller.org/">Rails Installer</a> (<a class="ref" href="beginning#sec:rails_installer_windows">Section&nbsp;1.2.2.1</a>).  </li>

</ul>


<p>Si vous avez une connaissance de Vim, assurez-vous de puiser dans la florissante communauté des <a href="http://www.google.com/search?q=vim+rails">Vim-using Rails hackers</a>. Attardez-vous spécialement sur les améliorations de <a href="http://www.vim.org/scripts/script.php?script_id=1567">rails.vim</a> et le projet à tiroir <a href="http://www.vim.org/scripts/script.php?script_id=1658">NERD tree</a>.</p>

<div class="label" id="fig:editor_shell"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/editor_shell.png" alt="editor_shell" /></span></div><div class="caption"><span class="header">Illustration 1.1: </span><span class="description">Un environnement de développement éditeur de texte/ligne de commande (TextMate/iTerm).  <a href="http://railstutorial.org/images/figures/editor_shell-full.png">(taille&nbsp;normale)</a></span></div></div>




<h4><a id="sec:1.2.1.3" href="beginning#sec:1.2.1.3" class="heading">Navigateurs internet</a></h4>


<p>Bien qu'on puisse choisir dans une large panoplie de navigateurs, la majorité des développeurs Rails font appel à Firefox, Safari ou Chrome pour développer leurs applications. Les copies d'écran dans ce tutoriel Rails proviennent en général de Firefox. Si vous utilisez Firefox, je vous suggère d'utiliser l'add-on <a href="http://getfirebug.com/">Firebug</a>, qui vous permet de faire tout un tas de choses magiques, comment inspecter dynamiquement (ou même modifier) la structure HTML et les règles CSS de n'importe quelle page. Pour ceux qui n'utilisent pas Firefox, <a href="http://getfirebug.com/firebuglite">Firebug Lite</a> fonctionne avec la plupart des autres navigateurs, et Safari comme Chrome ont de façon native un outil d'inspection des éléments accessible en cliquant-droit sur n'importe quelle partie de la page. Quel que soit le navigateur utilisé, l'expérience démontre que le temps passé à apprendre à se servir d'un outil d'inspection est rapidement et richement récompensé.</p>

<h4><a id="sec:1.2.1.4" href="beginning#sec:1.2.1.4" class="heading">Une note à propos des outils</a></h4>


<p>En vous appliquant à rendre votre environnement de développement opérationnel, vous constaterez peut-être que vous dépensez <em>beaucoup</em> de temps à faire en sorte que les choses, simplement, fonctionnent. Le processus d'apprentissage des éditeurs et des IDEs est particulièrement long&nbsp;; vous pourrez passer des semaines sur des tutoriels TextMate ou Vim. Si ce jeu est tout nouveau pour vous, je tiens à vous assurer que <em>passer du temps à apprendre à connaître ses outils est normal</em>. Tout le monde y passe. Parfois cela est frustrant, et il est facile de perdre patience quand vous avez en tête le projet d'une magnifique application web et que vous voulez <em>juste apprendre Rails tout de suite</em>, mais que vous avez à «&nbsp;perdre&nbsp;» une semaine sur un ancien et bizarre éditeur de texte Unix pour pouvoir ne faire que commencer. Mais un artisan se doit de connaître ses outils&nbsp;; au bout du compte, soyez certain que le jeu en vaut la chandelle.</p>

<div class="label" id="sec:rubygems"></div>


<h3><a id="sec:1.2.2" href="beginning#sec:rubygems" class="heading"><span class="number">1.2.2</span> Ruby, RubyGems, Rails, et Git</a></h3>


<p>Maintenant, il est temps d'installer Ruby <em>et</em> Rails. La source canonique et actualisée est la <a href="http://rubyonrails.org/download">page de téléchargement de Ruby on Rails</a>. Vous pouvez y aller dès à présent&nbsp;; les parties de ce livre peuvent être lues avec profit sans être connecté à par celle-ci. Car je vais injecter certains commentaires personnels sur cette étape.</p>

<div class="label" id="sec:rails_installer_windows"></div>


<h4><a id="sec:1.2.2.1" href="beginning#sec:rails_installer_windows" class="heading">Installeur Rails (Windows)</a></h4>


<p>L'installation de Rails sur Windows était auparavant une calamité, mais grâce aux efforts de bonnes personnes à <a href="http://engineyard.com/">Engine Yard</a> &mdash;&nbsp;spécialement Dr.&nbsp;Nic Williams et Wayne&nbsp;E. Seguin&nbsp;&mdash; l'installation de Rails et des logiciels afférents sur Windows est maintenant incroyablement facilitée. Si vous êtes sous Windows, allez au <a href="http://railsinstaller.org/">Rails Installer</a> (<a href="http://railsinstaller.org/">http://railsinstaller.org/</a>) et téléchargez l'exécutable Rails Installer. Double-cliquez l'exécutable et suivez les instructions d'installation pour installer Git (vous pourrez donc passer la <a class="ref" href="beginning#sec:install_git">section&nbsp;1.2.2.2</a>), Ruby (passer la <a class="ref" href="beginning#sec:install_ruby">section&nbsp;1.2.2.3</a>), RubyGems (passez la <a class="ref" href="beginning#sec:install_rubygems">section&nbsp;1.2.2.4</a>), et Rails lui-même (passez la <a class="ref" href="beginning#sec:install_rails">section&nbsp;1.2.2.5</a>). Une fois l'installation terminée, vous pouvez directement passer à la création de la première application à la <a class="ref" href="beginning#sec:the_first_application">section&nbsp;1.2.3</a>.</p>

<div class="label" id="sec:install_git"></div>


<h4><a id="sec:1.2.2.2" href="beginning#sec:install_git" class="heading">Installation de Git</a></h4>


<p>Le plus gros de l'écosystème Rails repose d'une manière ou d'une autre sur un <a href="http://en.wikipedia.org/wiki/Revision_control">système de contrôle de version</a> appelé <a href="http://git-scm.com/">Git</a> (couvert plus en détail dans la <a class="ref" href="beginning#sec:version_control">section&nbsp;1.3</a>). Puisque son usage est omniprésent, vous devriez installer Git même à ce point de départ&nbsp;; je vous suggère de suivre les instructions d'installation propres à votre plate-forme que vous trouverez à cette adresse&nbsp;: <a href="http://progit.org/book/ch1-4.html">Installing Git section of <em>Pro Git</em></a>.</p>

<div class="label" id="sec:install_ruby"></div>


<h4><a id="sec:1.2.2.3" href="beginning#sec:install_ruby" class="heading">Installer Ruby</a></h4>


<p>L'étape suivante consiste à installer Ruby. Il est possible que votre système le possède déjà&nbsp;; essayez d'exécuter la commande…</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ruby -v
<span class="go">ruby 1.9.2</span>
</pre></div>
</div>


<p>… pour voir le numéro de version de votre Ruby. Rails&nbsp;3 requiert  Ruby&nbsp;1.8.7 ou plus récent et fonctionne mieux avec Ruby&nbsp;1.9.2. Ce tutoriel pré-suppose que vous utilisez la dernière version de développent de Ruby&nbsp;1.9.2, connu sous le nom Ruby&nbsp;1.9.2-head, mais Ruby&nbsp;1.8.7 devrait fonctionner tout aussi bien.</p>

<p>La branche Ruby&nbsp;1.9 est en développement lourd, donc malheureusement installer la dernière version de Ruby peut relever du challenge. Vous devrez compter alors sur les instructions les plus actualisées qu'on trouve en ligne. Ce qui suit est une série d'étapes que j'ai exécutées pour le fonctionnement sur mon système (Macintosh OS&nbsp;X), mais vous aurez peut-être à chercher à droite et à gauche pour qu'elles fonctionnent sur le vôtre.</p>

<p>Dans le cadre de l'installation de Ruby, si vous utilisez OS&nbsp;X ou Linux je recommande fortement l'installation de Ruby en utilisant le <a href="http://rvm.beginrescueend.com/">Ruby Version Manager (RVM)</a>, qui vous permet d'installer et gérer plusieurs versions de Ruby sur la même machine (le projet <a href="http://github.com/vertiginous/pik">Pik</a> accomplit la même chose sous Windows). Cela est particulièrement important si vous voulez faire tourner Rails&nbsp;3 et Rails&nbsp;2.3 sur le même ordinateur. Si vous voulez emprunter cette voie, je vous suggère l'utilisation de RVM pour installer deux combinaisons Ruby/Rails&nbsp;: Ruby&nbsp;1.8.7/Rails&nbsp;2.3.10 et Ruby&nbsp;1.9.2/Rails&nbsp;3.0.5. Si vous rencontrez le moindre problème avec  RVM, vous pouvez souvent trouver son créateur, Wayne&nbsp;E. Seguin, sur le canal IRC de RVM (<a href="http://webchat.freenode.net/?channels=rvm">#rvm on freenode.net</a>).<sup class="footnote" id="fnref:1.7"><a href="#fn:1.7">7</a></sup></p>

<p>Après l'<a href="http://rvm.beginrescueend.com/rvm/install/">installation de RVM</a>, vous pouvez installer Ruby de cette manière&nbsp;:<sup class="footnote" id="fnref:1.8"><a href="#fn:1.8">8</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm get head
<span class="gp">$</span> rvm reload
<span class="gp">$</span> rvm install 1.8.7
<span class="gp">$</span> rvm install 1.9.2
<span class="go">&lt;attendez un moment&gt;</span>
</pre></div>
</div>


<p>Les deux premières commandes actualisent et rechargent RVM lui-même, ce qui constitue une bonne pratique puisque RVM est fréquemment actualisé. Les deux commandes finales procèdent à l'installation de Ruby&nbsp;; en fonction de votre système, cela peut prendre plus ou moins de temps pour télécharger et compiler les sources, donc ne vous inquiétez pas si ça vous semble une éternité (soyez également informé que beaucoup de peites choses peuvent aller de travers. Par exemple, sur mon système la dernière version de Ruby&nbsp;1.8.7 ne voudra pas se compiler&nbsp;; après bien des recherches et des lamentations, j'ai découvert que j'avais besoin du «&nbsp;patchlevel&nbsp;» numéro 174&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm install 1.8.7-p174
</pre></div>
</div>


<p>Quand de telles choses surviennent, c'est toujours très frustrant (Oh que oui&nbsp;! NdT), mais au moins, vous saurez que ça n'arrive pas qu'à vous.</p>

<p>Typiquement, les programmes Ruby sont distribués via des <em>gems</em>, qui sont des packages autonomes de code Ruby. Puisque des gems avec des numéros de versions différents peuvent parfois entrer en conflit, il est souvent pratique de créer des <em>gemsets</em> séparés, qui sont des faisceaux (<em>bundles</em>) autonomes de gems. En particulier, Rails est distribué comme un gem, et il y a des conflits entre  Rails&nbsp;2 et Rails&nbsp;3, donc si vous voulez lancer plusieurs versions de Rails sur le même système vous aurez besoin de créer une gemset différent pour chacune d'elle&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --create 1.8.7-p174@rails2tutorial
<span class="gp">$</span> rvm --create use 1.9.2@rails3tutorial
</pre></div>
</div>


<p>La première commande crée le gemset <code>rails2tutorial</code> associé à Ruby&nbsp;1.8.7-p174, tandis que la seconde commande crée le gemset <code>rails3tutorial</code> associé à Ruby&nbsp;1.9.2 et l'utilise (via la commande <code>use</code>) en même temps. RVM supporte une large variété de commandes pour manipuler les gemsets&nbsp;; voyez la documentation à l'adresse <a href="http://rvm.beginrescueend.com/gemsets/">http://rvm.beginrescueend.com/gemsets/</a>.</p>

<p>Dans ce tutoriel, nous voulons que notre système utilise Ruby&nbsp;1.9.2 et Rails&nbsp;3.0 par défaut, ce que nous pouvons définir comme suit&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --default use 1.9.2@rails3tutorial
</pre></div>
</div>


<p>Cela définit simultanéement la version de Ruby par défaut à la version 1.9.2 et le gemset par défaut à <code>rails3tutorial</code>.</p>

<p>En passant, si vous vous retrouvez coincé avec RVM, exécuter des commandes telles que les suivantes devraient vous permettre de retrouver toutes vos facultés&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rvm --help
<span class="gp">$</span> rvm gemset --help
</pre></div>
</div>


<div class="label" id="sec:install_rubygems"></div>


<h4><a id="sec:1.2.2.4" href="beginning#sec:install_rubygems" class="heading">Installation de RubyGems</a></h4>


<p><em>RubyGems</em> est un gestionnaire de packages pour les projets Ruby, et il y a légion d'excellentes librairies (Rails inclus) accessibles comme packages Ruby, ou comme <em>gems</em>. L'installation de RubyGems devrait être facile une fois Ruby installé. En fait, si vous avez <a href="http://rvm.beginrescueend.com/rvm/install/">installé RVM</a>, vous avez déjà RubyGems, puisque RVM l'inclut automatiquement&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> which gem
<span class="go">/Users/mhartl/.rvm/rubies/ruby-head/bin/gem</span>
</pre></div>
</div>

<p>Si vous ne l'avez pas encore, vous devez <a href="http://rubyforge.org/frs/?group_id=126">télécharger RubyGems</a>, l'extraire, puis aller dans le dossier <code>rubygems</code> pour lancer le programme d'installation&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> ruby setup.rb
</pre></div>
</div>


<p>Si RubyGems est déjà installé, vous pouvez vouloir actualiser votre système avec la dernière version&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem update --system
</pre></div>
</div>


<p>Pour finir, si vous utilisez Ubuntu Linux, vous devriez jeter un coup d'œil à <a href="http://toranbillups.com/blog/archive/2010/09/01/How-to-install-Rails-3.0-and-Ruby-1.9.2-on-Ubuntu">the Ubuntu/Rails&nbsp;3.0 blog post by Toran Billups</a> pour des instructions complètes sur l'installation.</p>

<div class="label" id="sec:install_rails"></div>


<h4><a id="sec:1.2.2.5" href="beginning#sec:install_rails" class="heading">Installer Rails</a></h4>


<p>Une fois RubyGems installé, l'installation de Rails&nbsp;3.0 devrait être un jeu d'enfant&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem install rails --version 3.0.5
</pre></div>
</div>


<p>Pour vérifier si tout a fonctionné, exécutez la commande suivante&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails -v
<span class="go">Rails 3.0.5</span>
</pre></div>
</div>


<div class="label" id="sec:the_first_application"></div>


<h3><a id="sec:1.2.3" href="beginning#sec:the_first_application" class="heading"><span class="number">1.2.3</span> La première application</a></h3>


<p>Grosso-modo, toutes les applications Rails commencent de la même manière, par une commande <code>rails</code>. Ce programme pratique crée un squelette de l'application Rails dans le dossier de votre choix. Pour commencer, faite un dossier pour votre projet Rails et exécutez la commande <code>rails</code> pour créer la première application&nbsp;:</p>

<div class="label" id="code:rails_script"></div>


<div class="codelisting">
<div class="listing"><span class="header">Illustration 1.1.</span> <span class="description">Exécution du script <code>rails</code> pour générer une nouvelle application web.</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> mkdir rails_projects
<span class="gp">$</span> <span class="nb">cd </span>rails_projects
<span class="gp">$</span> rails new first_app
<span class="go">      create  </span>
<span class="go">      create  README</span>
<span class="go">      create  .gitignore</span>
<span class="go">      create  Rakefile</span>
<span class="go">      create  config.ru</span>
<span class="go">      create  Gemfile</span>
<span class="go">      create  app</span>
<span class="go">      create  app/controllers/application_controller.rb</span>
<span class="go">      create  app/helpers/application_helper.rb</span>
<span class="go">      create  app/views/layouts/application.html.erb</span>
<span class="go">      create  app/models</span>
<span class="go">      create  config</span>
<span class="go">      create  config/routes.rb</span>
<span class="go">      create  config/application.rb</span>
<span class="go">      create  config/environment.rb</span>
<span class="go">      .</span>
<span class="go">      .</span>
<span class="go">      .</span>
</pre></div>
</div></div>


<p>Remarquez le nombre de fichiers et de dossier que la commande <code>rails</code> crée. Cette structure stantard de dossiers et de fichiers (<a class="ref" href="beginning#fig:directory_structure_rails_3">Illustration&nbsp;1.2</a>) est l'un des nombreux avantages de Rails&nbsp;; cela vous propulse directement de zéro à une application fonctionnelle (bien que minimale). Plus encore, puisque la structure est commune à toutes les applications Rails, vous pouvez immédiatement prendre vos repères en regardant le code de quelqu'un d'autre. Un résumé des fichiers Rails par défaut apparait dans la <a class="ref" href="beginning#table:rails_directory_structure">table&nbsp;1.1</a>&nbsp;; nous en apprendrons plus sur la plupart de ces fichiers tout au long de ce livre.</p>

<div class="label" id="fig:directory_structure_rails_3"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/directory_structure_rails_3.png" alt="directory_structure_rails_3" /></span></div><div class="caption"><span class="header">Illustration 1.2: </span><span class="description">La structure du dossier pour une toute nouvelle application Rails.&nbsp;<a href="http://railstutorial.org/images/figures/directory_structure_rails_3-full.png">(taille&nbsp;normale)</a></span></div></div>




<div class="label" id="table:rails_directory_structure"></div>


<div class="table"><div class="center"><table class="tabular"><tr><th class="align_left"><strong>Fichier/Dossier</strong></th><th class="align_left"><strong>Objet</strong></th></tr><tr class="top_bar"><td class="align_left"><tt>app/</tt></td><td class="align_left">Cœur du code de l'application (app), incluant des modèles (models), des vues (views), des contrôleurs (controllers), et des «&nbsp;assistants&nbsp;»  (helpers)</td></tr><tr><td class="align_left"><tt>config/</tt></td><td class="align_left">Configuration de l'application</td></tr><tr><td class="align_left"><tt>db/</tt></td><td class="align_left">Fichiers pour manipuler la base de données</td></tr><tr><td class="align_left"><tt>doc/</tt></td><td class="align_left">Documentation pour l'application</td></tr><tr><td class="align_left"><tt>lib/</tt></td><td class="align_left">Modules libraries</td></tr><tr><td class="align_left"><tt>log/</tt></td><td class="align_left">Journaux (logs) de  l'application</td></tr><tr><td class="align_left"><tt>public/</tt></td><td class="align_left">Données publiques (p.e., accessibles aux navigateurs web), telles que les images et les feuilles de styles (CSS)</td></tr><tr><td class="align_left"><tt>script/rails</tt></td><td class="align_left">Un script fourni par Rails pour générer du code, ouvrir les sessions console, ou démarrer une serveur web local</td></tr><tr><td class="align_left"><tt>test/</tt></td><td class="align_left">Tests de l'application (rendu obsolète par le dossier <tt>spec/</tt> introduit à la <a class="ref" href="static-pages#sec:static_pages_with_rails">section&nbsp;3.1.2</a>)</td></tr><tr><td class="align_left"><tt>tmp/</tt></td><td class="align_left">Fichiers temporaires</td></tr><tr><td class="align_left"><tt>vendor/</tt></td><td class="align_left">Codes Tierce-partie tels que les plugins et les gems</td></tr><tr><td class="align_left"><tt>README</tt></td><td class="align_left">Une brève description de l'application</td></tr><tr><td class="align_left"><tt>Rakefile</tt></td><td class="align_left">Tâches utiles accessibles par le biais de la commande <code>rake</code></td></tr><tr><td class="align_left"><tt>Gemfile</tt></td><td class="align_left">Les Gems requis par l'application</td></tr><tr><td class="align_left"><tt>config.ru</tt></td><td class="align_left">Un fichier de configuration pour <a href="http://rack.rubyforge.org/doc/">Rack middleware</a></td></tr><tr><td class="align_left"><tt>.gitignore</tt></td><td class="align_left">Les <em>patterns</em> pour les fichiers qui doivent être ignorés par Git</td></tr></table></div><div class="caption"><span class="header">Table 1.1: </span><span class="description">Résumé de la structure par défaut d'un dossier Rails.</span></div></div>




<div class="label" id="sec:bundler"></div>


<h3><a id="sec:1.2.4" href="beginning#sec:bundler" class="heading"><span class="number">1.2.4</span> Bundler</a></h3>


<p>Après avoir créé une nouvelle application Rails, on utilise <em>Bundler</em> pour installer et inclure les gems utiles à l'application. Cela consiste à ouvrir le fichier <code>Gemfile</code> avec votre éditeur de texte favori&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>first_app/
<span class="gp">$</span> mate Gemfile
</pre></div>
</div>


<p>Le résultat devrait ressembler à l'<a class="ref" href="beginning#code:default_gemfile">illustration&nbsp;1.2</a>.</p>

<div class="label" id="code:default_gemfile"></div>


<div class="codelisting">
<div class="listing"><span class="header">Illustration 1.2.</span> <span class="description">Le fichier <code>Gemfile</code> par défaut dans le dossier <code>first_app</code>.</span>       <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              id="clippy_88ae3e9609a97ab6d07800888a1d0e13234eb949">
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param name="FlashVars" value="text=source%20'http://rubygems.org'%0A%0Agem%20'rails',%20'3.0.5'%0A%0A%23%20Bundle%20edge%20Rails%20instead:%0A%23%20gem%20'rails',%20:git%20=%3E%20'git://github.com/rails/rails.git'%0A%0Agem%20'sqlite3%2Druby',%20:require%20=%3E%20'sqlite3'%0A%0A%23%20Use%20unicorn%20as%20the%20web%20server%0A%23%20gem%20'unicorn'%0A%0A%23%20Deploy%20with%20Capistrano%0A%23%20gem%20'capistrano'%0A%0A%23%20To%20use%20debugger%0A%23%20gem%20'ruby%2Ddebug'%0A%0A%23%20Bundle%20the%20extra%20gems:%0A%23%20gem%20'bj'%0A%23%20gem%20'nokogiri',%20'1.4.1'%0A%23%20gem%20'sqlite3%2Druby',%20:require%20=%3E%20'sqlite3'%0A%23%20gem%20'aws%2Ds3',%20:require%20=%3E%20'aws/s3'%0A%0A%23%20Bundle%20gems%20for%20certain%20environments:%0A%23%20gem%20'rspec',%20:group%20=%3E%20:test%0A%23%20group%20:test%20do%0A%23%20%20%20gem%20'webrat'%0A%23%20end%0A" />
      <param name="bgcolor" value="#ffffff" />
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=source%20'http://rubygems.org'%0A%0Agem%20'rails',%20'3.0.5'%0A%0A%23%20Bundle%20edge%20Rails%20instead:%0A%23%20gem%20'rails',%20:git%20=%3E%20'git://github.com/rails/rails.git'%0A%0Agem%20'sqlite3%2Druby',%20:require%20=%3E%20'sqlite3'%0A%0A%23%20Use%20unicorn%20as%20the%20web%20server%0A%23%20gem%20'unicorn'%0A%0A%23%20Deploy%20with%20Capistrano%0A%23%20gem%20'capistrano'%0A%0A%23%20To%20use%20debugger%0A%23%20gem%20'ruby%2Ddebug'%0A%0A%23%20Bundle%20the%20extra%20gems:%0A%23%20gem%20'bj'%0A%23%20gem%20'nokogiri',%20'1.4.1'%0A%23%20gem%20'sqlite3%2Druby',%20:require%20=%3E%20'sqlite3'%0A%23%20gem%20'aws%2Ds3',%20:require%20=%3E%20'aws/s3'%0A%0A%23%20Bundle%20gems%20for%20certain%20environments:%0A%23%20gem%20'rspec',%20:group%20=%3E%20:test%0A%23%20group%20:test%20do%0A%23%20%20%20gem%20'webrat'%0A%23%20end%0A"
             bgcolor="#ffffff"
      />
      </object>
</div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.5&#39;</span>

<span class="c1"># Bundle edge Rails instead:</span>
<span class="c1"># gem &#39;rails&#39;, :git =&gt; &#39;git://github.com/rails/rails.git&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>

<span class="c1"># Utilser unicorn comme serveur web</span>
<span class="c1"># gem &#39;unicorn&#39;</span>

<span class="c1"># Déployer l'application avec Capistrano</span>
<span class="c1"># gem &#39;capistrano&#39;</span>

<span class="c1"># Le déboggueur</span>
<span class="c1"># gem &#39;ruby-debug&#39;</span>

<span class="c1"># Bundle les gems supplémentaires :</span>
<span class="c1"># gem &#39;bj&#39;</span>
<span class="c1"># gem &#39;nokogiri&#39;, &#39;1.4.1&#39;</span>
<span class="c1"># gem &#39;sqlite3-ruby&#39;, :require =&gt; &#39;sqlite3&#39;</span>
<span class="c1"># gem &#39;aws-s3&#39;, :require =&gt; &#39;aws/s3&#39;</span>

<span class="c1"># Bundle ces gems pour certains environements:</span>
<span class="c1"># gem &#39;rspec&#39;, :group =&gt; :test</span>
<span class="c1"># group :test do</span>
<span class="c1">#   gem &#39;webrat&#39;</span>
<span class="c1"># end</span>
</pre></div>
</div></div>


<p>La plupart de ces lignes sont commentés par le symbole dièse (<code>#</code>)&nbsp;; elles sont là pour vous montrer certains des gems les plus communs et donner des exemples de la syntaxe Bundler. Pour le moment, nous n'aurons besoin d'aucun gem autres que ceux par défaut&nbsp;: Rails lui-même, et le gem pour l'interface Ruby pour la <a href="http://www.sqlite.org/">base de données SQLite</a>.</p>

<p>Même si vous spécifiez un numéro de version pour la commande <code>gem</code>, Bundler installera toujours automatiquement la dernière version. Malheureusement, les actualisations des gems causent souvent des ruptures mineures mais potentiellement perturbantes, donc dans ce tutoriel nous ajouterons en général un numéro de version explicite connu, comme le montre l'<a class="ref" href="beginning#code:gemfile_sqlite_version">illustration&nbsp;1.3</a>.<sup class="footnote" id="fnref:1.9"><a href="#fn:1.9">9</a></sup></p>

<div class="label" id="code:gemfile_sqlite_version"></div>


<div class="codelisting">
<div class="listing"><span class="header">Illustration 1.3.</span> <span class="description">Un fichier <code>Gemfile</code> avec un numéro de version du gem <tt>sqlite3-ruby</tt> explicite.</span>       <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              id="clippy_9839b883b592d294963403e3484510e9bf40e582">
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param name="FlashVars" value="text=source%20'http://rubygems.org'%0A%0Agem%20'rails',%20'3.0.5'%0Agem%20'sqlite3%2Druby',%20'1.3.2',%20:require%20=%3E%20'sqlite3'%0A" />
      <param name="bgcolor" value="#ffffff" />
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=source%20'http://rubygems.org'%0A%0Agem%20'rails',%20'3.0.5'%0Agem%20'sqlite3%2Druby',%20'1.3.2',%20:require%20=%3E%20'sqlite3'%0A"
             bgcolor="#ffffff"
      />
      </object>
</div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.5&#39;</span>
<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div></div>


<p>Cela change la ligne&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div>


<p>… de l'<a class="ref" href="beginning#code:default_gemfile">extrait&nbsp;1.2</a> en&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span>
</pre></div>
</div>


<p>… qui force Bundler à installer la version <tt>1.3.2</tt> du gem <tt>sqlite3-ruby</tt> (notez que vous aurez besoin de la version <tt>1.2.5</tt> du gem <tt>sqlite3-ruby</tt> si vous tournez sous OS&nbsp;X Leopard, comme <code>1.3.2</code> a besoin de Snow Leopard pour se compiler proprement).</p>

<p>Si vous êtes sous Ubuntu Linux, vous pouvez devoir installer une paire d'autre packages à ce point du tutoriel&nbsp;:<sup class="footnote" id="fnref:1.10"><a href="#fn:1.10">10</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> sudo apt-get install libxslt-dev libxml2-dev libsqlite3-dev    <span class="c"># <u>pour Linux</u></span>
</pre></div>
</div>


<p>Une fois que vous avec assemblé correctement votre <code>Gemfile</code>, installez les gems en utilisant la commande <code>bundle install</code>&nbsp;:<sup class="footnote" id="fnref:1.11"><a href="#fn:1.11">11</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle install
<span class="go">Fetching source index for http://rubygems.org/</span>
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>


<p>Cela peut prendre un certain temps, mais une fois fait, notre application sera prête à démarrer.</p>

<div class="label" id="sec:rails_server"></div>


<h3><a id="sec:1.2.5" href="beginning#sec:rails_server" class="heading"><span class="number">1.2.5</span> <code>rails server</code></a></h3>


<p>Grâce à l'exécution de <code>rails new</code> à la <a class="ref" href="beginning#sec:the_first_application">section&nbsp;1.2.3</a> et <code>bundle install</code> à la <a class="ref" href="beginning#sec:bundler">section&nbsp;1.2.4</a>, nous avons déjà une application que nous pouvons lancer &mdash;&nbsp;mais comment&nbsp;? Heureusement, Rails est fourni avec un programme de commande en ligne, ou <em>script</em>, qui lance un serveur web <em>local</em>,<sup class="footnote" id="fnref:1.12"><a href="#fn:1.12">12</a></sup> visible seulement depuis votre machine de développement&nbsp;:<sup class="footnote" id="fnref:1.13"><a href="#fn:1.13">13</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails server
<span class="go">=&gt; Booting WEBrick</span>
<span class="go">=&gt; Rails 3.0.5 application starting on http://0.0.0.0:3000</span>
<span class="go">=&gt; Call with -d to detach</span>
<span class="go">=&gt; Ctrl-C to shutdown server</span>
</pre></div>
</div>


<p>Ce code nous dit que l'application est lancée sur le <a href="http://en.wikipedia.org/wiki/TCP_and_UDP_port">port</a> 3000<sup class="footnote" id="fnref:1.14"><a href="#fn:1.14">14</a></sup> à l'adresse <code>0.0.0.0</code>. Cette adresse dit à l'ordinateur d'écouter toutes les adresses IP accessibles et configurées sur la machine spécifiques&nbsp;; en particulier, nous pouvons voir l'application en utilisant l'adresse spéciale <code>127.0.0.1</code>, connue aussi sous la forme <code>localhost</code>. Nous pouvons voir le résultat en visitant l'adresse <a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a> de l'<a class="ref" href="beginning#fig:riding_rails_3">illustration&nbsp;1.3</a>.<sup class="footnote" id="fnref:1.15"><a href="#fn:1.15">15</a></sup></p>

<div class="label" id="fig:riding_rails_3"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/riding_rails_3.png" alt="riding_rails_3" /></span></div><div class="caption"><span class="header">Illustration 1.3: </span><span class="description">La page Rails par défaut (<a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a>).&nbsp;<a href="http://railstutorial.org/images/figures/riding_rails_3-full.png">(taille&nbsp;normale)</a></span></div></div>


<p>Pour voir les informations sur notre première application, cliquez sur le lien «&nbsp;About your application's environment&nbsp;». Le résultat est montré dans l'<a class="ref" href="beginning#fig:riding_rails_3_environment">illustration&nbsp;1.4</a>.<sup class="footnote" id="fnref:1.16"><a href="#fn:1.16">16</a></sup></p>

<div class="label" id="fig:riding_rails_3_environment"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/riding_rails_3_environment.png" alt="riding_rails_3_environment" /></span></div><div class="caption"><span class="header">Illustration 1.4: </span><span class="description">La page par défaut (<a href="http://localhost:3000/"><tt>http://localhost:3000/</tt></a>) avec l'environnement de l'application.&nbsp;<a href="http://railstutorial.org/images/figures/riding_rails_3_environment-full.png">(taille&nbsp;normale)</a></span></div></div>


<p>Bien sûr, nous n'avons pas besoin de la page par défaut de Rails très longtemps, mais il est sympa de voir qu'elle fonctionne pour le moment. Nous détruirons la page par défaut et la remplacerons par une page d'accueil personnalisée à la <a class="ref" href="filling-in-the-layout#sec:rails_routes">section&nbsp;5.2.2</a>.</p>

<div class="label" id="sec:mvc"></div>


<h3><a id="sec:1.2.6" href="beginning#sec:mvc" class="heading"><span class="number">1.2.6</span> Modèle-Vue-Contrôleur (MVC)</a></h3>


<p>Même à cette étape précoce, il est utile d'avoir un aperçu de haut-niveau de comment fonctionne les applications Rails (<a class="ref" href="beginning#fig:MVC">Illustration&nbsp;1.5</a>). Vous pouvez avoir noté que la structure standard d'une application Rails (<a class="ref" href="beginning#fig:directory_structure_rails_3">Illustration&nbsp;1.2</a>) possède un dossier appelé <code>app/</code> contenant trois sous-dossiers&nbsp;: <code>models</code> (<em>Modèles</em>), <code>views</code> (<em>Vues</em>), and <code>controllers</code> (<em>Contrôleurs</em>). C'est l'indice que Rails suit le modèle architectural <a href="http://en.wikipedia.org/wiki/Model-view-controller">Modèle-Vue-Contrôleur</a> (Model-View-Controls ou MVC), qui force une séparation entre la «&nbsp;logique domaine&nbsp;» (appelée aussi «&nbsp;logique métier&nbsp;») et les entrées, et la logique de présentation associée à une interface utilisateur graphique (<em>Graphical User Interface</em> ou <em>GUI</em>). Dans le cas des applications web, la «&nbsp;logique domaine&nbsp;» consiste typiquement en modèles de données pour des choses telles que les utilisateurs, les articles et les produits, et le GUI est juste une page web dans un navigateur web.</p>

<p>En interagissant avec une application Rails, un navigateur envoie une  <em>requête</em>, qui est reçue par un serveur web et passée à un <em>contrôleur</em> Rails, qui lui-même prend en charge la suite des opérations. Dans certains cas, le contrôleur rendra immédiatement une <em>vue</em>, qui est un modèle converti en HTML et renvoyé au navigateur. De façon plus classique pour les sites dynamiques, le contrôleur interagit avec le <em>modèle</em>, qui est un objet Ruby qui représente un élément du site (tel qu'un utilisateur) et est en charge de la communication avec la base de données. Après l'invocation du <em>modèle</em>, le <em>contrôleur</em> produit alors une <em>vue</em> et retourne la page web achevée au navigateur sous forme de code HTML.</p>

<div class="label" id="fig:MVC"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/mvc_schematic.png" alt="mvc_schematic" /></span></div><div class="caption"><span class="header">Illustration 1.5: </span><span class="description">Une représentation schématique de l'architecture modèle-vue-contrôleur (MVC).</span></div></div>


<p>Si cette discussion vous semble un peu trop abstraite pour le moment, ne vous inquiétez pas&nbsp;; nous y ferons fréquemment référence. Addionnellement, la <a class="ref" href="a-demo-app#sec:mvc_in_action">section&nbsp;2.2.2</a> contient une discussion plus détaillée sur le MVC dans le contexte de l'<em>Application démo</em>.  Pour finir, l'<em>Application exemple</em> utilisera tous les aspects du MVC&nbsp;; nous couvrirons le problème des contrôleurs et des vues en abordant la <a class="ref" href="static-pages#sec:static_pages_with_rails">section&nbsp;3.1.2</a>, les modèles en abordant la <a class="ref" href="modeling-and-viewing-users-one#sec:user_model">section&nbsp;6.1</a>, et nous verrons comment les trois fonctionnent ensemble dans la <a class="ref" href="modeling-and-viewing-users-one#sec:users_show">section&nbsp;6.3.2</a>.</p>

<div class="label" id="sec:version_control"></div>


<h2><a id="sec:1.3" href="beginning#sec:version_control" class="heading"><span class="number">1.3</span> Contrôle de version avec Git</a></h2>

<p>Maintenant que nous avons une application Rails fraiche et fonctionnelle, nous allons prendre le temps pour une étape qui, bien que techniquement optionnelle, est considérée par de nombreux développeurs Rails comme pratiquement essentielle, à savoir placer le code source de votre application sous <em>contrôle de version</em>. Les systèmes de contrôle de version nous permettent de procéder à des modifications du code de notre projet, de collaborer plus aisément avec d'autres développeurs, et de revenir en arrière en cas d'erreur (comme la suppression accidentelle de fichiers). Savoir utiliser un système de contrôle de version est une compétence que doit acquérir tout développeur.</p>

<p>Il y a beaucoup d'options pour le contrôle de version, mais la communauté Rails a largement opté pour <a href="http://git-scm.com/">Git</a>, un système de contrôle de version originellement développé par Linus Torvalds pour accueillir le kernel Linux. Git est un vaste sujet, et nous ne ferons que l'effleurer dans ce livre, mais vous trouverez de nombreuses bonnes ressources sur le web&nbsp;; je recommande spécialement <a href="http://progit.org"><em>Pro Git</em></a> de Scott Chacon (Apress, 2009). Mettre votre code source sous contrôle de version avec Git est <em>chaudement</em> recommandé, pas seulement parce que c'est une pratique universelle dans le monde de Rails, mais aussi parce que cela vous permettra de partager votre code plus facilement (<a class="ref" href="beginning#sec:github">Section&nbsp;1.3.4</a>) et déployer votre application dès le premier chapitre (<a class="ref" href="beginning#sec:deploying">Section&nbsp;1.4</a>).</p>

<div class="label" id="sec:git_setup"></div>


<h3><a id="sec:1.3.1" href="beginning#sec:git_setup" class="heading"><span class="number">1.3.1</span> Installation et réglages</a></h3>

<p>La première chose à faire est d'installer Git si vous n'avez pas suivi les étapes de la <a class="ref" href="beginning#sec:install_git">section&nbsp;1.2.2.2</a> (comme indiqué dans la section, cela implique d'avoir suivi les instructions de la <a href="http://progit.org/book/ch1-4.html">Section «&nbsp;Installation de Git&nbsp;» de <em>Pro Git</em> (<em>Installing Git section of </em>Pro Git)</a>.)</p>

<h4><a id="sec:1.3.1.1" href="beginning#sec:1.3.1.1" class="heading">Initialisation des réglages du système</a></h4>

<p>Après avoir installé Git, vous devez effectuer une initialisation des réglages. Ce sont des réglages <em>système</em>, ce qui signifie que vous n'avez à les faire qu'une fois par ordinateur&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global user.name <span class="s2">&quot;Votre Nom&quot;</span>
<span class="gp">$</span> git config --global user.email youremail@example.com
</pre></div>
</div>

<p>J'aime aussi utiliser <code>co</code> au lieu de la commande verbeuse  <code>checkout</code>, ce que nous pouvons arranger comme suit&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global alias.co checkout
</pre></div>
</div>

<p>Ce tutoriel utilisera souvent la commande complète <code>checkout</code> qui fonctionne pour les systèmes qui n'ont pas configuré ce <code>co</code>, mais dans la vie réelle j'utilise presque toujours <code>git co</code> pour contrôler la sortie d'un projet.</p>

<p>En dernier réglage, vous pouvez optionnellement définir l'éditeur que Git utilisera pour les messages <em>commits</em>. Si vous utilisez un éditeur graphique comme TextMate, gVim ou MacVim, vous aurez besoin d'utiliser un <em>drapeau</em> (<em>flag</em>) pour vous assurer que l'éditeur reste attaché à la shell au lieu de se détacher automatiquement&nbsp;:<sup class="footnote" id="fnref:1.17"><a href="#fn:1.17">17</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git config --global core.editor <span class="s2">&quot;mate -w&quot;</span>
</pre></div>
</div>


<p>Remplacez <code>"mate -w"</code> par <code>"gvim -f"</code> pour gVim ou <code>"mvim -f"</code> pour MacVim.</p>

<h4><a id="sec:1.3.1.2" href="beginning#sec:1.3.1.2" class="heading">Initialisation des réglages du repository</a></h4>

<p>Nous allons maintenant effectuer quelques opérations nécessaires chaque fois que vous créez un nouveau <em>repository</em> —&nbsp;un nouveau «&nbsp;système de contrôle&nbsp;», ou un dossier, où vous allez déposer vos versions de l'application&nbsp;. NdT&nbsp;— (ce qui n'arrive qu'une fois dans ce livre, mais qui est susceptible de se reproduire un jour). Commencez par naviguer dans le dossier racine de la première application et initialisez un nouveau repository&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git init
<span class="go">Initialized empty Git repository in /Users/mhartl/rails_projects/first_app/.git/</span>
</pre></div>
</div>


<p>La prochaine étape consiste à ajouter les fichiers du projet au repository. Il y a une complication mineure, cependant&nbsp;: par défaut, Git piste les changements de <em>tous</em> les fichiers du dossier, même ceux que nous ne voulons pas pister. Par exemple, Rails crée des journaux (<em>logs</em>) pour enregistrer le comportement de l'application&nbsp;; ces fichiers changent fréquemment, et nous ne voulons pas que notre système de contrôle de version les actualise en permanence. Git possède un mécanisme simple pour ignorer de tels fichiers&nbsp;: ajoutez simplement dans le dossier racine de Rails un fichier appelé <code>.gitignore</code> contenant quelques règles précisant à Git les fichiers à ignorer.</p>

<p>En consultant à nouveau la <a class="ref" href="beginning#table:rails_directory_structure">Table&nbsp;1.1</a>, nous voyons que la commande <code>rails</code> crée un fichier <code>.gitignore</code> par défaut dans le dossier racine de Rails, comme le montre l'<a class="ref" href="beginning#code:default_gitignore">illustration&nbsp;1.4</a>.</p>

<div class="label" id="code:default_gitignore"></div>


<div class="codelisting">
<div class="listing"><span class="header">Illustration 1.4.</span> <span class="description">Le fichier par défaut <code>.gitignore</code> créé par la commande <code>rails</code>.</span>       <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              id="clippy_a14fbe0b8b325cd4278e30da76b2e3568a52c98f">
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param name="FlashVars" value="text=.bundle%0Adb/*.sqlite3%0Alog/*.log%0Atmp/**/*%0A" />
      <param name="bgcolor" value="#ffffff" />
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=.bundle%0Adb/*.sqlite3%0Alog/*.log%0Atmp/**/*%0A"
             bgcolor="#ffffff"
      />
      </object>
</div>
<div class="code"><div class="highlight"><pre>.bundle
db/*.sqlite3
log/*.log
tmp/**/*
</pre></div>
</div></div>


<p>L'<a class="ref" href="beginning#code:default_gitignore">illustration&nbsp;1.4</a> contraint  Git à ignorer les fichiers tels que les journaux (<code>log</code>), les fichiers temporaires de Rails (<code>tmp</code>), et les bases de données SQLite (par exemple, pour ignorer les journaux, qui se trouvent dans le dossier <code>log/</code>, nous utilisons le code <code>log/*.log</code> pour ignorer tous les fichiers d'extension <code>.log</code>). La plupart de ces fichiers ignorés changent fréquemment et automatiquement, donc les inclure dans le contrôle de version est gênant&nbsp;; plus encore, lors d'une collaboration, ils peuvent entrainer des conflits frustrants et inutiles.</p>

<p>Le fichier <code>.gitignore</code> de l'<a class="ref" href="beginning#code:default_gitignore">extrait&nbsp;1.4</a> est suffisant pour ce tutoriel, mais en fonction de votre système vous pourrez trouver le code de l'<a class="ref" href="beginning#code:gitignore">extrait&nbsp;1.5</a> plus adapté.<sup class="footnote" id="fnref:1.18"><a href="#fn:1.18">18</a></sup> Ce fichier <code>.gitignore</code> augmenté est défini pour ignorer les fichiers de documentation Rails, les fichiers swap Vim et Emacs, (et pour les utilisateurs OS&nbsp;X) les fichiers de dossier <code>.DS_Store</code> créés par le finder du Mac. Si vous voulez appliquer ce réglage plus large de fichiers ignorés, ouvrez votre fichier <code>.gitignore</code> dans votre éditeur de texte favori et remplissez-le avec le contenu de l'<a class="ref" href="beginning#code:gitignore">extrait&nbsp;1.5</a>.</p>

<div class="label" id="code:gitignore"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 1.5.</span> <span class="description">Un fichier <code>.gitignore</code> augmenté.</span>       <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              id="clippy_3fab39f59e919e5630c7ef701c7df1d7247f3ce6">
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param name="FlashVars" value="text=.bundle%0Adb/*.sqlite3*%0Alog/*.log%0A*.log%0A/tmp/%0Adoc/%0A*.swp%0A*~%0A.DS_Store%0A" />
      <param name="bgcolor" value="#ffffff" />
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=.bundle%0Adb/*.sqlite3*%0Alog/*.log%0A*.log%0A/tmp/%0Adoc/%0A*.swp%0A*~%0A.DS_Store%0A"
             bgcolor="#ffffff"
      />
      </object>
</div>
<div class="code"><div class="highlight"><pre>.bundle
db/*.sqlite3*
log/*.log
*.log
/tmp/
doc/
*.swp
*~
.DS_Store
</pre></div>
</div></div>




<div class="label" id="sec:adding_and_committing"></div>


<h3><a id="sec:1.3.2" href="beginning#sec:adding_and_committing" class="heading"><span class="number">1.3.2</span> Ajout et mandat de dépôt</a></h3>


<p>Enfin, nous allons ajouter à Git les fichiers de notre nouveau projet Rails et «&nbsp;déposer&nbsp;» (<em>commit</em>) le résultat. Vous pouvez ajouter tous les fichiers (sauf ceux ignorés par le fichier <code>.gitignore</code>) comme suit&nbsp;:<sup class="footnote" id="fnref:1.19"><a href="#fn:1.19">19</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git add .
</pre></div>
</div>


<p>Ici, le point «&nbsp;<code>.</code>&nbsp;» représente le dossier courant, et Git est suffisamment intelligent pour ajouter les fichiers de façon <em>récursive</em>, donc il inclut automatiquement tous les sous-dossiers. Cette commande ajoute les fichiers du projet à une «&nbsp;aire de repos&nbsp;» (<em>staging area</em>), qui contient les changements provisoires à votre projet&nbsp;; vous pouvez voir les fichiers placés dans l'«&nbsp;aire de repos&nbsp;» grâce à la commande <code>status</code>&nbsp;:<sup class="footnote" id="fnref:1.20"><a href="#fn:1.20">20</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="gp">#</span>
<span class="gp">#</span> Initial commit
<span class="gp">#</span>
<span class="gp">#</span> Changes to be committed:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       new file:   README
<span class="gp">#</span>       new file:   Rakefile
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>


<p>(Les retours sont plus longs, j'ai donc utilisé des points verticaux pour indiquer le texte supprimé)</p>

<p>Pour indiquer à Git que vous voulez conserver les changements, utilisez la commande <code>commit</code>&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git commit -m <span class="s2">&quot;Initial commit&quot;</span>
<span class="go">[master (root-commit) df0a62f] Initial commit</span>
<span class="go">42 files changed, 8461 insertions(+), 0 deletions(-)</span>
<span class="go">create mode 100644 README</span>
<span class="go">create mode 100644 Rakefile</span>
<span class="go">.</span>
<span class="go">.</span>
<span class="go">.</span>
</pre></div>
</div>


<p>Le drapeau <code>-m</code> vous laisse ajouter un message à votre dépôt&nbsp;; si vous ommettez <code>-m</code>, Git ouvrira l'éditeur que vous avez défini dans la <a class="ref" href="beginning#sec:git_setup">section&nbsp;1.3.1</a> et vous demandera alors d'entrer le message.</p>

<p>Il est important de noter que les dépôts Git sont <em>locaux</em>, enregistrés seulement sur la machine où se fait le dépôt. Ce comportement est différent du système de contrôle de version populaire appelé Subversion, dans lequel le dépôt fait nécessairement des changements dans le repository à distance. Git, lui, divise le dépôt de style Subversion en ces deux parties logiques&nbsp;: un enregistrement local des changements (<code>git commit</code>) et un «&nbsp;push&nbsp;» des changements sur le repository à distance (<code>git push</code>). Nous verrons un exemple de l'étape «&nbsp;push&nbsp;» à la <a class="ref" href="beginning#sec:git_commands">section&nbsp;1.3.5</a>.</p>

<p>En passant, vous pouvez voir une liste des messages des mandats de dépôt en utilisant la commande <code>log</code>&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git log
<span class="go">commit df0a62f3f091e53ffa799309b3e32c27b0b38eb4</span>
<span class="go">Author: Michael Hartl &lt;michael@michaelhartl.com&gt;</span>
<span class="go">Date:   Thu Oct 15 11:36:21 2009 -0700</span>

<span class="go">  Dépôt initial</span>
</pre></div>
</div>


<p>Pour quitter le <code>git log</code>, vous avez peut-être à taper <code>q</code>.</p>

<h3><a id="sec:1.3.3" href="beginning#sec:1.3.3" class="heading"><span class="number">1.3.3</span> Qu'est-ce que Git peut faire de bien pour vous&nbsp;?</a></h3>


<p>Au point où nous en sommes, l'utilité de mettre votre code source sous contrôle de version n'est peut-être pas encore clair, donc laissez-moi vous donner juste un exemple (nous en verrons de nombreux autres au cours des chapitres suivants). Supposons que vous ayez effectué des changements accidentels, tels que («&nbsp;oh noooon&nbsp;!&nbsp;») détruire le dossier critique <code>app/controllers/</code>&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> ls app/controllers/
<span class="go">application_controller.rb</span>
<span class="gp">$</span> rm -rf app/controllers/
<span class="gp">$</span> ls app/controllers/
<span class="go">ls: app/controllers/: No such file or directory</span>
</pre></div>
</div>

<p>Nous utilisons ici la commande Unix <code>ls</code> pour lister le contenu du dossier <code>app/controllers/</code> et la commande <code>rm</code> pour le supprimer. Le drapeau <code>-rf</code> force la récursivité, ce qui a pour effet de détruire tous les fichiers, dossiers, sous-dossiers, sans demander la confirmation de la suppression de ces éléments.</p>

<p>Consultons l'état (<em>status</em>) de Git pour voir où l'on en est&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="gp">#</span> Changed but not updated:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       deleted:    app/controllers/application_controller.rb
<span class="gp">#</span>
<span class="go">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</span>
</pre></div>
</div>


<p>Nous voyons qu'un certain nombre de fichiers ont été détruits, mais les changements se trouvent seulement dans l'«&nbsp;arbre courant&nbsp;» (<em>working tree</em>)&nbsp;; ils n'ont pas encore été «&nbsp;déposés&nbsp;». Cela signifie que nous pouvons encore annuler les changements facilement en reconnectant Git sur le précédent dépôt avec la commande <code>checkout</code> (et un drapeau <code>-f</code> pour forcer le remplacement des changements courants)&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -f
<span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="go">nothing to commit (working directory clean)</span>
<span class="gp">$</span> ls app/controllers/
<span class="go">application_controller.rb</span>
</pre></div>
</div>


<p>Le dossier et les fichiers manquants sont de retour. Quel soulagement&nbsp;!</p>

<div class="label" id="sec:github"></div>


<h3><a id="sec:1.3.4" href="beginning#sec:github" class="heading"><span class="number">1.3.4</span> GitHub</a></h3>


<p>Maintenant que vous avez déposé votre projet sous version de contrôle avec Git, il est temps de «&nbsp;pusher&nbsp;» votre code vers <a href="http://github.com">GitHub</a>, un site social de code optimisé pour accueillir et partager les repositories Git. Déposer une copie de votre repository Git sur GitHub vise deux buts&nbsp;: c'est une sauvegarde complète de votre code (qui inclus l'historique complet de vos dépôts), et cela facilite toute collaboration future. Cette étape est optionnelle, mais être un membre  GitHub vous ouvrira la porte d'une large variété de projets Ruby on Rails (GitHub possède un taux d'adoption élevé dans la communauté Ruby et Rails, et en fait, il est écrit lui-même en Rails).</p>

<div class="label" id="fig:github_first_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/github_first_page.png" alt="github_first_page" /></span></div><div class="caption"><span class="header">Figure 1.6: </span><span class="description">La première page GitHub après la création du compte.&nbsp;<a href="http://railstutorial.org/images/figures/github_first_page-full.png">(taille&nbsp;normale)</a></span></div></div>




<div class="label" id="fig:create_first_repository"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/create_first_repository.png" alt="create_first_repository" /></span></div><div class="caption"><span class="header">Illustration 1.7: </span><span class="description">Création du repository de la première application sur GitHub.&nbsp;<a href="http://railstutorial.org/images/figures/create_first_repository-full.png">(taille&nbsp;normale)</a></span></div></div>


<p>GitHub possède une large variété de plans payants, mais pour du code open-source les services sont gratuits, donc inscrivez-vous pour un <a href="https://github.com/signup/free">free GitHub account</a> (<em>compte GitHub gratuit</em>) si vous n'en possédez pas encore un (vous pouvez lire d'abord les instrutions sur les <a href="http://help.github.com/key-setup-redirect">clés SSH</a>). Après vous être inscrit, vous verrez une page similaire à celle de l'<a class="ref" href="beginning#fig:github_first_page">illustration&nbsp;1.6</a>. Cliquez le lien <a href="http://github.com/repositories/new">create a repository</a> (<em>Créer un repository</em>) et remplissez le formulaire comme dans l'<a class="ref" href="beginning#fig:create_first_repository">illustration&nbsp;1.7</a>. Après avoir soumis le formulaire, «&nbsp;pushez&nbsp;» votre première application (c'est-à-dire envoyer votre code sur le repository distant) comme suit&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git remote add origin git@github.com:&lt;username&gt;/first_app.git
<span class="gp">$</span> git push origin master
</pre></div>
</div>


<p>Ces commandes indique à Git que vous voulez ajouter GitHub comme origine de votre branche principale (<em>master</em>) et «&nbsp;pusher&nbsp;» votre repository vers GitHub. Bien sûr, vous devrez remplacer <tt class="verb">&lt;username&gt;</tt> par votre nom d'utilisateur réel. Par exemple, la commande que j'ai jouée pour l'utilisateur <code>railstutorial</code> était&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git remote add origin git@github.com:railstutorial/first_app.git
</pre></div>
</div>


<p>Le résultat consiste en une page GitHub pour le repository de la première application, avec un système de navigation de fichiers, un historique complet des dépôts, et beaucoup d'autres petites choses utiles (<a class="ref" href="beginning#fig:github_repository_page">Illustration&nbsp;1.8</a>).</p>

<div class="label" id="fig:github_repository_page"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/github_repository_page.png" alt="github_repository_page" /></span></div><div class="caption"><span class="header">Illustration 1.8: </span><span class="description">Une page repository GitHub.&nbsp;<a href="http://railstutorial.org/images/figures/github_repository_page-full.png">(taille&nbsp;normale)</a></span></div></div>




<div class="label" id="sec:git_commands"></div>


<h3><a id="sec:1.3.5" href="beginning#sec:git_commands" class="heading"><span class="number">1.3.5</span> Branch, edit, commit, merge</a></h3>


<p>Si vous avez suivi les étapes de la <a class="ref" href="beginning#sec:github">section&nbsp;1.3.4</a>, vous avez peut-être noté que GitHub affiche automatiquement le contenu du fichier <code>README</code> sur la page principale du repository. Dans notre cas, puisque le projet est une application Rails générée en utilisant la commande <code>rails</code>, le fichier <code>README</code> est celui qui vient avec Rails (<a class="ref" href="beginning#fig:rails_readme">Illustration&nbsp;1.9</a>). Il n'est pas très utile, donc dans cette section nous créerons notre première édition en modifiant ce fichier <code>README</code> pour décrire notre projet plutôt que le frameword Rails. Chemin faisant, nous verrons un premier exemple des commandes de flux de travail <code>branch</code> (<em>branche</em>), <code>edit</code> (<em>éditer</em>), <code>commit</code> (<em>mandat de dépôt</em>) et <code>merge</code> (<em>fusionner</em>) que je recommande d'utiliser avec Git.</p>

<div class="label" id="fig:rails_readme"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/rails_readme.png" alt="rails_readme" /></span></div><div class="caption"><span class="header">Illustration 1.9: </span><span class="description">Le fichier <code>README</code> initial de notre projet sur GitHub.&nbsp;<a href="http://railstutorial.org/images/figures/rails_readme-full.png">(taille&nbsp;normale)</a></span></div></div>




<div class="label" id="sec:git_branch"></div>


<h4><a id="sec:1.3.5.1" href="beginning#sec:git_branch" class="heading">Branch</a></h4>


<p>Git est incroyablement bon pour faire des <em>branches</em>, qui sont en fait des copies du repository sur lesquelles nous pouvons effectuer des changements (peut-être expérimentaux) sans modifier les fichiers parents. Dans la plupart des cas, le repository parent est la branche <em>master</em>, et nous pouvons créer une nouvelle branche sujet en utilisant la commande <code>checkout</code> avec le drapeau <code>-b</code>&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -b modify-README
<span class="go">Switched to a new branch &#39;modify-README&#39;</span>
<span class="gp">$</span> git branch
<span class="go">master</span>
<span class="go">* modify-README</span>
</pre></div>
</div>


<p>Ici, la seconde commande, <code>git branch</code>, liste simplement toutes les branches locales, et l'astérisque «&nbsp;<code>*</code>&nbsp;» identifie la branche sur laquelle nous nous trouvons actuellement. Notez que <code>git checkout -b modify-README</code> d'une part crée une nouvelle branche et d'autre part bascule vers cette branche, comme l'indique l'astérisque devant la branche <code>modify-README</code> (si vous avez défini l'alias <code>co</code> à la <a class="ref" href="beginning#sec:version_control">section&nbsp;1.3</a>, vous pouvez utiliser <code>git co -b modify-README</code>).</p>

<p>La pertinence des branchements ne devient claire que lorsque vous travaillez sur un projet avec plusieurs développeurs,<sup class="footnote" id="fnref:1.21"><a href="#fn:1.21">21</a></sup> mais les branches sont utiles même pour un tutoriel à simple développeur comme celui-ci. En particulier, la branche maitresse est isolé de tout changement que nous faisons sur la branche sujet, donc même si nous <em>vissons</em> réellement des choses, nous pouvons toujours abandonner les changements en rejoignant la branche maitresse et en détruisant la branche sujet. Nous verrons comment faire cela à la fin de la section.</p>

<p>En passant, pour un changement aussi mineur que celui-ci, je ne m'embêterais pas avec une nouvelle branche, mais il n'est jamais trop tard pour prendre de bonnes habitudes.</p>

<div class="label" id="sec:git_edit"></div>


<h4><a id="sec:1.3.5.2" href="beginning#sec:git_edit" class="heading">Edit</a></h4>


<p>Après avoir créé la branche sujet, nous l'éditerons pour la décrire un peu mieux. J'aime utiliser le langage <a href="http://daringfireball.net/projects/markdown/">Markdown</a> pour ça, et si vous utilisez l'extension de fichier <code>.markdown</code> alors GitHub mettra automatiquement en forme l'affichage du fichier pour vous. Donc, nous allons utiliser la version Git de la commande Unix <code>mv</code> («&nbsp;move&nbsp;», «&nbsp;déplacer&nbsp;») pour changer le nom, et le remplir avec le contenu de l'<a class="ref" href="beginning#code:new_readme">extrait&nbsp;1.6</a>:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git mv README README.markdown
<span class="gp">$</span> mate README.markdown
</pre></div>
</div>


<div class="label" id="code:new_readme"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 1.6.</span> <span class="description">Le nouveau fichier <code>README</code>, <code>README.markdown</code>.</span>       <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              id="clippy_2ffd10178debc2ce7174b9ff5a81e477063609d6">
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param name="FlashVars" value="text=%23%20Ruby%20on%20Rails%20Tutorial:%20first%20application%0A%0AThis%20is%20the%20first%20application%20for%0A[*Ruby%20on%20Rails%20Tutorial:%20Learn%20Rails%20by%20Example*](http://railstutorial.org/)%20%0Aby%20[Michael%20Hartl](http://michaelhartl.com/).%0A" />
      <param name="bgcolor" value="#ffffff" />
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=%23%20Ruby%20on%20Rails%20Tutorial:%20first%20application%0A%0AThis%20is%20the%20first%20application%20for%0A[*Ruby%20on%20Rails%20Tutorial:%20Learn%20Rails%20by%20Example*](http://railstutorial.org/)%20%0Aby%20[Michael%20Hartl](http://michaelhartl.com/).%0A"
             bgcolor="#ffffff"
      />
      </object>
</div>
<div class="code"><div class="highlight"><pre># Tutoriel Ruby on Rails&nbsp;: première application

C'est la première application pour le 
[*Tutoriel Ruby on Rails&nbsp;: Apprendre Rails par l'exemple*](http://railstutorial.org/) 
de [Michael Hartl](http://michaelhartl.com/).
</pre></div>
</div></div>




<div class="label" id="sec:git_commit"></div>


<h4><a id="sec:1.3.5.3" href="beginning#sec:git_commit" class="heading">Commit</a></h4>


<p>Les changements ainsi effectués, nous pouvons jeter un œil à l'état de notre branche&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch modify-README
<span class="gp">#</span> Changes to be committed:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       renamed:    README -&gt; README.markdown
<span class="gp">#</span>
<span class="gp">#</span> Changed but not updated:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="o">)</span>
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes in working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span>       modified:   README.markdown
<span class="gp">#</span>
</pre></div>
</div>


<p>À ce point, nous pourrions utiliser <code>git add .</code> comme à la <a class="ref" href="beginning#sec:adding_and_committing">section&nbsp;1.3.2</a>, mais Git fournit le drapeau <code>-a</code> comme raccourci pour le (très commun) cas d'un dépôt de toutes les modifications des fichiers existants (ou des fichiers créés avec <code>git mv</code>, qui ne comptent pas comme nouveau fichier pour Git)&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git commit -a -m <span class="s2">&quot;Amelioration du fichier README&quot;</span>
<span class="go">2 files changed, 5 insertions(+), 243 deletions(-)</span>
<span class="go">delete mode 100644 README</span>
<span class="go">create mode 100644 README.markdown</span>
</pre></div>
</div>


<p>Soyez prudent en utilisant de façon inappropriée le drapeau <code>-a</code>&nbsp;; si vous avez ajouté de nouveaux fichiers au projet depuis le dernier dépôt, vous devez toujours le préciser à Git en utilisant d'abord la commande <code>git add</code>.</p>

<div class="label" id="sec:git_merge"></div>


<h4><a id="sec:1.3.5.4" href="beginning#sec:git_merge" class="heading">Merge</a></h4>


<p>Maintenant que nous avons achevé nos changements, nous sommes prêts à «&nbsp;merger&nbsp;» (<em>fusionner</em>) le résultat dans la branche maitresse&nbsp;:<sup class="footnote" id="fnref:1.22"><a href="#fn:1.22">22</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout master
<span class="go">Switched to branch &#39;master&#39;</span>
<span class="gp">$</span> git merge modify-README
<span class="go">Updating 34f06b7..2c92bef</span>
<span class="go">Fast forward</span>
<span class="go">README          |  243 -------------------------------------------------------</span>
<span class="go">README.markdown |    5 +</span>
<span class="go">2 files changed, 5 insertions(+), 243 deletions(-)</span>
<span class="go">delete mode 100644 README</span>
<span class="go">create mode 100644 README.markdown</span>
</pre></div>
</div>


<p>Notez que le message de retour de Git inclut fréquemment des choses comme <code>34f06b7</code>, qui sont en fait liés à la représentation interne des repositories. Votre message de retour diffèrera concernant ces détails, mais elle devrait correspondre à la sortie présentée ci-dessus.</p>

<p>Après avoir fusionné les changements, vous pouvez mettre en ordre vos branches en supprimant la branche sujet avec <code>git branch -d</code> &nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git branch -d modify-README
<span class="go">Deleted branch modify-README (was 2c92bef).</span>
</pre></div>
</div>


<p>Cette étape est optionnelle, et en réalité il est assez courant de laisser les branches sujet intactes. De cette façon vous pouvez basculer d'avant en arrière entre les branches maitresse et sujets, fusionner les changements chaque fois que vous atteignez un point final.</p>

<p>Comme mentionné plus haut, il est aussi possible d'abandonner les changements de la branche sujet, dans ce cas avec la commande <code>git branch -D</code>:</p>

<div class="code"><div class="highlight"><pre><span class="c"># Pour l'illustration seulement&nbsp;; ne le faites pas, au risque de gâcher une branche</span>
<span class="nv">$ </span>git checkout -b topic-branch
<span class="nv">$ </span>&lt;really screw up the branch&gt;
<span class="nv">$ </span>git add .
<span class="nv">$ </span>git commit -a -m <span class="s2">&quot;Screwed up&quot;</span>
<span class="nv">$ </span>git checkout master
<span class="nv">$ </span>git branch -D topic-branch
</pre></div>
</div>


<p>Contrairement au drapeau <code>-d</code>, le drapeau <code>-D</code> détruira la branche même si nous n'avons pas fusionné les changements.</p>

<div class="label" id="sec:git_push"></div>


<h4><a id="sec:1.3.5.5" href="beginning#sec:git_push" class="heading">Push</a></h4>


<p>Maintenant que nous avons actualisé le fichier <code>README</code>, nous pouvons «&nbsp;pusher&nbsp;» les changements vers GitHub pour voir le résultat. Puisque nous avons déjà effectué un <em>push</em> (<a class="ref" href="beginning#sec:github">Section&nbsp;1.3.4</a>), sur la plupart des systèmes nous pouvons ommettre d'indiquer <code>origin master</code>, et jouer simplement la commande <code>git push</code>&nbsp;:<sup class="footnote" id="fnref:1.23"><a href="#fn:1.23">23</a></sup></p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
</pre></div>
</div>


<p>Sur certains systèmes, cette commande provoquera une erreur&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
<span class="go">fatal: The current branch master is not tracking anything.</span>
<span class="c1">(Traduction&nbsp;:</span>
<span class="c1">fatal&nbsp;: la branche maitresse ne piste rien en ce moment.)</span>
</pre></div>
</div>


<p>Dans ce cas, vous devrez jouer la commande <code>git push origin master</code> comme à la <a class="ref" href="beginning#sec:github">section&nbsp;1.3.4</a>.</p>

<p>Comme promis, GitHub remet gentiment en forme le fichier en utilisant Markdown (<a class="ref" href="beginning#fig:new_readme">Illustration&nbsp;1.10</a>).</p>

<div class="label" id="fig:new_readme"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/new_readme.png" alt="new_readme" /></span></div><div class="caption"><span class="header">Illustration 1.10: </span><span class="description">Le fichier <code>README</code> amélioré (version anglaise), formaté avec Markdown.&nbsp;<a href="http://railstutorial.org/images/figures/new_readme-full.png">(taille&nbsp;normale)</a></span></div></div>




<div class="label" id="sec:deploying"></div>


<h2><a id="sec:1.4" href="beginning#sec:deploying" class="heading"><span class="number">1.4</span> Déploiement</a></h2>


<p>Même à ce stade peu avancé, nous allons déjà déployer en production notre application Rails même rudimentaire. Cette étape est optionnelle, mais déployer assez tôt et souvent nous permet de «&nbsp;capturer&nbsp;» le plus rapidement possible les problèmes de déploiement dans le cycle de développement. L'alternative &mdash;&nbsp;déployer l'application seulement après un effort laborieux enfermé dans l'environnement de développement&nbsp;&mdash; conduit souvent à de terribles maux de tête d'intégration quand le temps du lancement est arrivé.<sup class="footnote" id="fnref:1.24"><a href="#fn:1.24">24</a></sup></p>

<p>Déployer une application Rails était difficile, mais l'écosystème de déploiement Rails a rapidement mûri ces dernières années et il existe maintenant plusieurs grandes options. Celles-ci incluent les hôtes partagés ou les serveurs virtuels privés comme <a href="http://www.modrails.com/">Phusion Passenger</a> (un module pour les web serveurs Apache et Nginx<sup class="footnote" id="fnref:1.25"><a href="#fn:1.25">25</a></sup>), des compagnies de déploiement «&nbsp;tous-services&nbsp;» telles que <a href="http://engineyard.com/">Engine Yard</a> ou <a href="http://railsmachine.com/">Rails Machine</a> et des <em>clouds</em> <a href="http://cloud.engineyard.com">Engine Yard Cloud</a> ou <a href="http://heroku.com/">Heroku</a>.</p>

<p>Mon option de déploiement Rails favorite est Heroku, qui est une plate-forme hôte construite spécialement pour déployer les applications web Rails et autres applications Ruby.<sup class="footnote" id="fnref:1.26"><a href="#fn:1.26">26</a></sup> Heroku facile incroyablement le déploiement des applications Rails &mdash;&nbsp;pourvu que votre code source soit sous contrôle de version Git (c'est encore une autre raison de suivre les étapes d'utilisation de Git de la <a class="ref" href="beginning#sec:version_control">section&nbsp;1.3</a> si vous ne l'avez pas encore fait) La fin de cette section est dédiée au déploiement de notre application vers Heroku.</p>

<h3><a id="sec:1.4.1" href="beginning#sec:1.4.1" class="heading"><span class="number">1.4.1</span> Réglages Heroku</a></h3>


<p>Après la <a href="http://api.heroku.com/signup">création d'un compte Heroku</a>, installez le gem Heroku&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> <span class="o">[</span>sudo<span class="o">]</span> gem install heroku
</pre></div>
</div>


<p>Comme avec GitHub (<a class="ref" href="beginning#sec:github">Section&nbsp;1.3.4</a>), en utilisant Heroku vous aurez besoin de <a href="http://help.github.com/key-setup-redirect">créer une clé SSH</a> si vous n'en avez pas déjà une, et indiquer ensuite à Heroku votre <a href="http://en.wikipedia.org/wiki/Public-key_cryptography">clé publique</a> pour utiliser Git pour «&nbsp;pusher&nbsp;» le repository de l'<em>Application exemple</em> vers les serveurs&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku keys:add
</pre></div>
</div>


<p>Enfin, utilisez la commande <code>heroku</code> pour créer une place sur les serveurs Heroku pour l'application exemple (<a class="ref" href="beginning#code:heroku_create">Extrait&nbsp;1.7</a>).</p>

<div class="label" id="code:heroku_create"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 1.7.</span> <span class="description">Créer une nouvelle application sur Heroku.</span> </div>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku create
<span class="go">Created http://severe-fire-61.heroku.com/ | git@heroku.com:severe-fire-61.git</span>
<span class="go">Git remote heroku added</span>
</pre></div>
</div></div>


<p>Oui, c'est ça. La commande <code>heroku</code> command crée un nouveau sous-domaine juste pour notre application, accessible pour un affichage immédiat. Il n'y a rien à afficher encore, mais nous allons mettre ce déploiement au travail.</p>

<div class="label" id="sec:heroku_step_one"></div>


<h3><a id="sec:1.4.2" href="beginning#sec:heroku_step_one" class="heading"><span class="number">1.4.2</span> Déploiement Heroku, première étape </a></h3>


<p>Pour déployer l'application vers Heroku, la première étape consiste à utiliser Git pour «&nbsp;pusher&nbsp;» l'application vers Heroku&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push heroku master
</pre></div>
</div>


<p>(<em>Note&nbsp;:</em> certains lecteurs du tutoriel ont reporté avoir rencontré une erreur à cette étape liée à SQLite&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="go">rake aborted! no such file to load -- sqlite3</span>
</pre></div>
</div>


<p>Le réglage décrit dans ce chapitre fonctionne parfaitement sur la plupart des systèmes, le mien compris, mais si vous rencontrez ce problème vous devriez essayer d'actualiser votre <code>Gemfile</code> avec le code de l'<a class="ref" href="beginning#code:gemfile_sqlite_heroku">extrait&nbsp;1.8</a>, qui empêche Heorku d'essayer de charger le gem <tt>sqlite3-ruby</tt>).</p>

<div class="label" id="code:gemfile_sqlite_heroku"></div>


<div class="codelisting">
<div class="listing"><span class="header">Extrait 1.8.</span> <span class="description">Un <code>Gemfile</code> avec la correction Heroku nécessaire sur certains systèmes.</span>       <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
              width="110"
              height="14"
              id="clippy_957500621d2aa452aef4942b18dc1afca1f022e0">
      <param name="movie" value="/flash/clippy.swf"/>
      <param name="allowScriptAccess" value="always" />
      <param name="quality" value="high" />
      <param name="scale" value="noscale" />
      <param name="FlashVars" value="text=source%20'http://rubygems.org'%0A%0Agem%20'rails',%20'3.0.5'%0A%0Agem%20'sqlite3%2Druby',%20'1.3.2',%20:group%20=%3E%20:development%0A" />
      <param name="bgcolor" value="#ffffff" />
      <embed src="/flash/clippy.swf"
             width="110"
             height="14"
             name="clippy"
             quality="high"
             allowScriptAccess="always"
             type="application/x-shockwave-flash"
             pluginspage="http://www.macromedia.com/go/getflashplayer"
             FlashVars="text=source%20'http://rubygems.org'%0A%0Agem%20'rails',%20'3.0.5'%0A%0Agem%20'sqlite3%2Druby',%20'1.3.2',%20:group%20=%3E%20:development%0A"
             bgcolor="#ffffff"
      />
      </object>
</div>
<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">&#39;http://rubygems.org&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rails&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0.5&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;sqlite3-ruby&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.2&#39;</span><span class="p">,</span> <span class="ss">:group</span> <span class="o">=&gt;</span> <span class="ss">:development</span>
</pre></div>
</div></div>




<h3><a id="sec:1.4.3" href="beginning#sec:1.4.3" class="heading"><span class="number">1.4.3</span> Déploiement Heroku, seconde étape</a></h3>


<p>Il n'y a pas de seconde étape&nbsp;! Nous l'avons déjà accomplie (<a class="ref" href="beginning#fig:heroku_app">Illustration&nbsp;1.11</a>). Pour voir la toute nouvelle application déployée, vous pouvez visiter l'adresse que vous voyez quand vous jouez la commande <code>heroku create</code> (p.e. <a class="ref" href="beginning#code:heroku_create">extrait&nbsp;1.7</a>, mais avec l'adresse de votre propre application, pas la mienne).<sup class="footnote" id="fnref:1.27"><a href="#fn:1.27">27</a></sup> Vous pouvez aussi utiliser un argument avec la commande <code>heroku</code> qui provoque le lancement automatique du navigateur avec la bonne adresse&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku open
</pre></div>
</div>


<div class="label" id="fig:heroku_app"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/heroku_app.png" alt="heroku_app" /></span></div><div class="caption"><span class="header">Illustration 1.11: </span><span class="description">La première application du tutoriel Rails sur Heroku.&nbsp;<a href="http://railstutorial.org/images/figures/heroku_app-full.png">(taille&nbsp;normale)</a></span></div></div>


<p>Une fois le déploiement réussi, Heroku fournit une belle interface pour administrer et configurer votre application (<a class="ref" href="beginning#fig:heroku_info">Illustration&nbsp;1.12</a>).</p>

<div class="label" id="fig:heroku_info"></div>


<div class="figure"><div class="center"><span class="graphic"><img src="/images/figures/heroku_info.png" alt="heroku_info" /></span></div><div class="caption"><span class="header">Illustration 1.12: </span><span class="description">La belle interface sur Heroku.&nbsp;<a href="http://railstutorial.org/images/figures/heroku_info-full.png">(taille&nbsp;normale)</a></span></div></div>




<div class="label" id="sec:heroku_commands"></div>


<h3><a id="sec:1.4.4" href="beginning#sec:heroku_commands" class="heading"><span class="number">1.4.4</span> Commandes Heroku</a></h3>


<p>Il existe de nombreuses <a href="http://docs.heroku.com/heroku-command">commandes Heroku</a>, et nous ne ferons que les effleurer dans ce livre. Prenons une minute pour en montrer seulement une en renommant notre application comme suit&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku rename railstutorial
</pre></div>
</div>


<p>N'utilisez pas ce nom&nbsp;; je l'utilise déjà moi-même&nbsp;! En fait, vous ne devriez peut-être pas vous soucier de cette étape tout de suite&nbsp;; utiliser l'adresse par défaut fournie par Heroku est une bonne chose. Mais si vous tenez réellement à renommer votre application, vous pouvez implémenter la sécurité de l'application mentionnée au début de cette section en utilisant un obscur et aléatoire nom de sous-domaine, comme le suivant&nbsp;:</p>

<pre class="verbatim">hwpcbmze.heroku.com
seyjhflo.heroku.com
jhyicevg.heroku.com</pre>


<p>Avec un nom de domaine aléatoire, comme celui-ci, un internaute ne pourra visiter votre site que si vous lui en fournissez l'adresse (en passant, comme aperçu de l'incroyable «&nbsp;compacticité&nbsp;» de Ruby, voici le code que j'ai utilisé pour générer aléatoirement ce sous-domaine&nbsp;:</p>

<div class="code"><div class="highlight"><pre><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">.</span><span class="s1">&#39;z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span><span class="o">.</span><span class="n">shuffle</span><span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">7</span><span class="o">].</span><span class="n">join</span>
</pre></div>
</div>


<p>Joli, non&nbsp;?)</p>

<p>En plus de supporter les sous-domaines, Heroku supporte aussi les domaines personnalisés (en fait, le <a href="http://railstutorial.org">Site du tutoriel Ruby on Rails</a> se trouve sur Heroku&nbsp;; si vous lisez ce livre online, vous êtes justement en train de regarder le site hébergé par Heroku&nbsp;!). Consultez la <a href="http://docs.heroku.com/">documentation Heroku</a> pour en savoir plus sur les domains personnalisés et les autres sujets Heroku.</p>

<div class="label" id="sec:beginning_conclusion"></div>


<h2><a id="sec:1.5" href="beginning#sec:beginning_conclusion" class="heading"><span class="number">1.5</span> Conclusion</a></h2>


<p>Nous avons parcouru un long chemin dans ce chapitre&nbsp;: installation, développement, réglage de l'environnement, contrôle de version et déploiement. Si vous voulez partager vos progrès, sentez-vous libre d'envoyer un tweet ou une notification Facebook avec quelque chose comme&nbsp;:</p>

<div class="center"><a href="http://twitter.com/?status=I'm%20learning%20Ruby%20on%20Rails%20with%20@railstutorial!%20http://railstutorial.org/">J'apprends Ruby on Rails avec le tutoriel @railstutorial! http://railstutorial.org/</a></div>


<p>&nbsp;</p>

<p>Tout ce qui reste à faire, vous savez, est en fait de commencer à apprendre Rails. Allons-y&nbsp;!</p>

<div class="navigation">  <a class="next_page" href="a-demo-app#top">
    <span class="number">chapitre 2</span> Une application démo&nbsp;&raquo;
  </a>
</div>

<div class="footnotes">
<ol>
<li id="fn:1.1">La toute dernière version du <em>Tutoriel Ruby on Rails</em> peut être trouvée sur le site du livre à l'adresse <a href="http://railstutorial.org/">http://railstutorial.org/</a>. Si vous lisez ce livre en offline, assurez-vous de vérifier la <a href="http://railstutorial.org/book">version en ligne du livre tutoriel Rails à l'adresse http://railstutorial.org/book</a> pour les dernières actualisations. De plus, les livres PDF achetés sur railstutorial.org continueront d'être actualisés aussi longtemps que Rails&nbsp;3.0 et RSpec&nbsp;2.0 seront en développement.&nbsp;<a class="arrow" href="#fnref:1.1">&uarr;</a></li>
<li id="fn:1.2"><em>RailsSpace</em>, par Michael Hartl et Aurelius Prochazka (Addison-Wesley, 2007).&nbsp;<a class="arrow" href="#fnref:1.2">&uarr;</a></li>
<li id="fn:1.3"><em>URL</em> signifie Uniform Resource Locator. En pratique, c'est équivalent à ce que vous lisez dans la barre d'adresse de votre navigateur internet. En passant, le terme adéquat est <em>URI</em>, pour «&nbsp;Uniform Resource Identifier&nbsp;», mais l'usage populaire reste  <em>URL</em>.&nbsp;<a class="arrow" href="#fnref:1.3">&uarr;</a></li>
<li id="fn:1.4">En pratique, cela impliquera d'omettre tous les fichiers contenant <code>spec</code> dans leur nom, comme nous commencerons à le voir à la <a class="ref" href="static-pages#sec:TDD">section&nbsp;3.2.2</a>.&nbsp;<a class="arrow" href="#fnref:1.4">&uarr;</a></li>
<li id="fn:1.5">En lisant le <em>Tutoriel Rails</em>, vous trouverez peut-être pratique de suivre un lien vers une section interne pour voir une référence et revenir ensuite immédiatement à l'endroit où vous vous trouviez. C'est facile en lisant ce livre comme une page web, puisque vous pouvez simplement utiliser le bouton de retour de votre navigateur, mais Adobe Reader ainsi que «&nbsp;Aperçu&nbsp;» de l'OS&nbsp;X vous permettent de le faire avec les fichiers PDF. Avec Reader, vous pouvez cliquer avec le bouton droit de la souris sur le document et choisir «&nbsp;Vue précédente&nbsp;» pour revenir en arrière. Dans «&nbsp;Aperçu&nbsp;», utiliser le menu Aller&nbsp;: <code>Aller &gt; Précédent</code>. (Vous pouvez également, comme je préfère le faire sur Mac&nbsp;OS&nbsp;X, cliquer sur le lien avec la touche <tt>Cmd</tt> pressée, ce qui ouvre la cible du lien dans une autre fenêtre ou un autre onglet, qu'il suffit ensuite de fermer. C'est la méthode de loin la plus rapide. NdT )&nbsp;<a class="arrow" href="#fnref:1.5">&uarr;</a></li>
<li id="fn:1.6">L'éditeur vi est l'un des plus anciens et des plus puissants de l'arsenal Unix, et Vim est une amélioration de vi.&nbsp;<a class="arrow" href="#fnref:1.6">&uarr;</a></li>
<li id="fn:1.7">Si vous n'avez jamais utilisé IRC, je vous suggère de commencer par chercher un «&nbsp;client irc &lt;votre plate-forme&gt;&nbsp;» sur le net. Deux bons clients natifs pour OS&nbsp;X sont <a href="http://colloquy.info/">Colloquy</a> et <a href="http://limechat.net/mac/">LimeChat</a>. Et bien sûr il y a toujours l'interface web à l'adresse <a href="http://webchat.freenode.net/?channels=rvm">http://webchat.freenode.net/?channels=rvm</a>.&nbsp;<a class="arrow" href="#fnref:1.7">&uarr;</a></li>
<li id="fn:1.8">Vous pouvez avoir à installer le <a href="http://subversion.tigris.org/">système de contrôle de version Subversion</a> pour que ça fonctionne.&nbsp;<a class="arrow" href="#fnref:1.8">&uarr;</a></li>
<li id="fn:1.9">Sentez-vous libre d'expérimenter, cependant&nbsp;; si vous voulez vivre dangereusement, omettez le numéro de version (promettez-moi seulement de ne pas venir pleurer si ça casse).&nbsp;<a class="arrow" href="#fnref:1.9">&uarr;</a></li>
<li id="fn:1.10">Consultez le <a href="http://joehacker72.wordpress.com/2010/08/08/ubuntu-10-04ruby-on-rails-tutorial-v3-dependency-fix/">post du blog de Joe Ryan</a> pour plus d'information.&nbsp;<a class="arrow" href="#fnref:1.10">&uarr;</a></li>
<li id="fn:1.11">Si vous êtes sous OS&nbsp;X et que vous obtenez à ce point une erreur à propos d'un manque de fichiers entête Ruby (p.e <code>ruby.h</code>), vous avez peut-être besoin d'installer les outils de développement Xcode fournis dans le disque d'installation de l'OS&nbsp;X.&nbsp;<a class="arrow" href="#fnref:1.11">&uarr;</a></li>
<li id="fn:1.12">Le serveur web Rails par défaut est <em>WEBrick</em>, un serveur en pur Ruby qui n'est pas très satisfaisant pour la production mais convient au développement. Si vous installez le serveur web prêt-à-la-production <em>Mongrel</em> via <code>[sudo] gem install mongrel</code>, Rails utilisera plutôt ce serveur par défaut (le gem <tt>mongrel</tt> n'est pas compatible avec Ruby&nbsp;1.9.2&nbsp;; vous aurez à utiliser <code>[sudo] gem install sho-mongrel</code> à la place).&nbsp;<a class="arrow" href="#fnref:1.12">&uarr;</a></li>
<li id="fn:1.13">Rappelez-vous (<a class="ref" href="beginning#sec:conventions">Section&nbsp;1.1.3</a>) que les utilisateurs Windows peuvent avoir à taper plutôt <code>ruby rails server</code>.&nbsp;<a class="arrow" href="#fnref:1.13">&uarr;</a></li>
<li id="fn:1.14">Normalement, les sites web tournent sur le port 80, mais cela requiert en général des privilèges spéciaux, donc Rails choisit un port moins restrictif pour le serveur de développement.&nbsp;<a class="arrow" href="#fnref:1.14">&uarr;</a></li>
<li id="fn:1.15">Vous pouvez aussi accéder à l'application en visitant l'adresse <code>0.0.0.0:3000</code> ou <code>127.0.0.1:3000</code> dans votre navigateur, mais tous les gens que je connais utilisent <code>localhost:3000</code> dans ce contexte.&nbsp;<a class="arrow" href="#fnref:1.15">&uarr;</a></li>
<li id="fn:1.16">Les utilisateurs Windows peuvent avoir à <a href="http://www.sqlite.org/download.html">downloader le DLL SQLite</a> depuis le site <tt>sqlite.org</tt> et l'unzipper dans leur répertoire bin Ruby pour que ça fonctionne (assusez-vous aussi de relancer le serveur web local).&nbsp;<a class="arrow" href="#fnref:1.16">&uarr;</a></li>
<li id="fn:1.17">Normalement c'est une fonctionnalité, puisqu'elle vous laisse continuer à utiliser la ligne de commande après avoir lancé votre éditeur, mais Git interprète le détachement comme une fermeture du fichier avec un mandat de dépôt vide, ce qui empêche le commit de passer au travers. Je mentionne ce point seulement parce qu'il peut être sérieusement déroutant si vous essayez de définir votre éditeur comme <code>mate</code> ou <code>gvim</code> sans le drapeau. Si cette note vous rend confus, sentez-vous libre de l'ignorer.&nbsp;<a class="arrow" href="#fnref:1.17">&uarr;</a></li>
<li id="fn:1.18">Merci au lecteur Peter Aronoff pour ses clarifications utiles concernant la syntaxe correcte du fichier <code>.gitignore</code>.&nbsp;<a class="arrow" href="#fnref:1.18">&uarr;</a></li>
<li id="fn:1.19">Les utilisateurs Windows peuvent obtenir le message <code>warning: CRLF will be replaced by LF in .gitignore</code>. Cela est dû à la façon dont Windows gère les nouvelles lignes (LF est «&nbsp;linefeed&nbsp;», et CR est «&nbsp;carriage return&nbsp;» —&nbsp;retour de chariot), et peut être simplement ignoré. Si le message vous gêne, essayez de jouer <code>git config &ndash;global core.autocrlf false</code> en ligne de commande pour le désactiver.&nbsp;<a class="arrow" href="#fnref:1.19">&uarr;</a></li>
<li id="fn:1.20">Si dans le futur des fichiers non désirés commencent à apparaitre quand vous tapez <code>git status</code>, ajoutez-les simplement à votre fichier <code>.gitignore</code> de l'<a class="ref" href="beginning#code:gitignore">extrait&nbsp;1.5</a>.&nbsp;<a class="arrow" href="#fnref:1.20">&uarr;</a></li>
<li id="fn:1.21">Voyez le chapitre <a href="http://progit.org/book/ch3-0.html">Les branchements Git en <em>Pro Git</em></a> pour les détails.&nbsp;<a class="arrow" href="#fnref:1.21">&uarr;</a></li>
<li id="fn:1.22">Les utilisateurs expérimentés de Git reconnaissent  la sagesse d'utiliser <code>git rebase master</code> avant de basculer vers la branche maitresse, mais cette étape ne sera pas nécessaire dans ce livre.&nbsp;<a class="arrow" href="#fnref:1.22">&uarr;</a></li>
<li id="fn:1.23">En collaborant avec d'autres développeurs sur un projet, vous devriez jouer <tt class="verb">git pull --rebase</tt> avant cette étape pour «&nbsp;puller&nbsp;» (acquérir) tous les changements faits à distance par ces autres collaborateurs.&nbsp;<a class="arrow" href="#fnref:1.23">&uarr;</a></li>
<li id="fn:1.24">Bien que cela ne concerne pas les applications en exemple dans le <em>Tutoriel Rails</em>, si vous vous inquiétez de rendre publique, trop tôt et accidentellement, votre application, il existe plusieurs options&nbsp;; consultez la <a class="ref" href="beginning#sec:heroku_commands">section&nbsp;1.4.4</a> pour l'une d'entre elles.&nbsp;<a class="arrow" href="#fnref:1.24">&uarr;</a></li>
<li id="fn:1.25">Prononcé «&nbsp;Engine X&nbsp;».&nbsp;<a class="arrow" href="#fnref:1.25">&uarr;</a></li>
<li id="fn:1.26">Heroku fonctionne avec n'impore quelle plateforme web Ruby qui utilise <a href="http://rack.rubyforge.org/">Rack middleware</a>, qui fournit une interface standard entre les frameworks web et les serveurs web. L'adoption de l'interface Rack a été extraordinairement forte dans la communauté Ruby, incluant des frameworks aussi variés que <a href="http://www.sinatrarb.com/">Sinatra</a>, <a href="http://ramaze.net/">Ramaze</a>, <a href="http://camping.rubyforge.org/files/README.html">Camping</a>, et Rails, ce qui signifie que Heroku supporte  par essence toute application web Ruby.&nbsp;<a class="arrow" href="#fnref:1.26">&uarr;</a></li>
<li id="fn:1.27">Grâce aux détails de leur réglage, le lien d'environnement «&nbsp;À propos de votre application&nbsp;» ne fonctionne pas sur Heroku&nbsp;; au lieu de ça, en écrivant ces lignes vous obtenez un message d'erreur. Ne vous inquiétez pas&nbsp;; c'est normal. L'erreur disparaitra quand nous supprimerons la page par défaut de Rails à la <a class="ref" href="filling-in-the-layout#sec:rails_routes">section&nbsp;5.2.2</a>.&nbsp;<a class="arrow" href="#fnref:1.27">&uarr;</a></li>
</ol>
</div>
